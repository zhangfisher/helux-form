(self.webpackChunkspeedform_docs=self.webpackChunkspeedform_docs||[]).push([[525],{11528:function(gt,x,l){"use strict";l.r(x),l.d(x,{$:function(){return y.$},ComputedObjects:function(){return Tt},ComputedScopeRef:function(){return w},OBJECT_PATH_DELIMITER:function(){return O},SKIP_COMPUTED:function(){return nt},WatchObject:function(){return kt},WatchObjects:function(){return xt},computed:function(){return Et},createAsyncComputedMutate:function(){return it},createAsyncComputedObject:function(){return q},createComputedMutate:function(){return rt},createObject:function(){return y.share},createStore:function(){return we},createUseWatch:function(){return Mt},createWatch:function(){return lt},getSnap:function(){return y.getSnap},getVal:function(){return T},getValueByPath:function(){return P},installComputed:function(){return ut},installWatch:function(){return ft},isIncludePath:function(){return Ft},isSkipComputed:function(){return yt},markRaw:function(){return y.markRaw},setAsyncComputedObject:function(){return jt},setVal:function(){return $},skipComputed:function(){return X},watch:function(){return me}});var y=l(67687),w=function(e){return e.Root="root",e.Current="current",e.Parent="parent",e.Depends="depends",e.Self="self",e}({}),$t=l(70125),U=l.n($t);function V(e){return(e||[]).map(function(t){return Array.isArray(t)?t.join("."):t}).join("_")}function Q(e,t){var n="";return typeof t=="function"?n=t(e):typeof t=="string"?n=t:n=V(e),n}function Wt(e){return e instanceof Error?e:new Error(e)}var O="/",nt=Symbol("SKIP_COMPUTED");function yt(e){return e[nt]===!0}var Nt=l(79664),j=l.n(Nt);function mt(e,t){if(!Array.isArray(e))throw new Error("path must be an array");return t==="self"?e:t==="root"?[]:t==="parent"?e.slice(0,-2):t==="current"?e.slice(0,-1):typeof t=="string"?t.startsWith("./")?[].concat(j()(e.slice(0,-1)),j()(t.slice(2).split(O))):t.startsWith("../")?mt(e.slice(0,-1),t.slice(3)):(t.includes(".")&&(console.warn('[@speedform/reactive] The dependency path uses "/" as the separator, and will automatically convert'),t=t.replaceAll(".","/")),[].concat(j()(e.slice(0,-1)),j()(t.split(O)))):Array.isArray(t)?t:e}function Ct(e,t){var n=e.get(t);if(n!==void 0)return n;var r=e.get(Number(t)||t);if(r!==void 0)return r}function bt(e){return toString.call(e)==="[object Map]"}function T(e,t){if(t.length===0)return e;var n,r=e;return t.forEach(function(a){n=bt(r)?Ct(r,a):r[a],r=n}),n}function Ut(e,t,n){return e.map(function(r){return T(t,mt(n,r))})}function Gt(e){return(e||[]).map(function(t){return Array.isArray(t)?t:typeof t=="string"?t.startsWith("./")||t.startsWith("../")?t:t.includes(O)?t.split(O):t.split("."):[]})}var Kt=l(26851),Ht=l.n(Kt);function Te(e){return _typeof(e)=="object"&&e.hasOwnProperty("__COMPUTED__")&&["async","sync"].includes(e.__COMPUTED__)&&e.hasOwnProperty("fn")&&typeof e.fn=="function"&&e.hasOwnProperty("options")&&_typeof(e.options)=="object"}function Pe(e){return _typeof(e)=="object"&&["result","loading","timeout","retry","run"].every(function(t){return e.hasOwnProperty(t)})}function Ft(e,t){return e.length>t.length?!1:e.every(function(n,r){return n===t[r]})}function Bt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log",n=typeof e=="function"?e():e instanceof Error?e.stack:e;try{var r;(r=console)[t].apply(r,["[@speedform/reactive] "].concat(j()(Array.isArray(n)?n:[n])))}catch(a){}}function $(e,t,n){var r=e,a=t.length-1;t.forEach(function(i,u){var o=bt(r);if(u===a){o?r.set(i,n):r[i]=n;return}var c=o?Ct(r,i):r[i];r=c})}function X(e){return e[nt]=!0,e}function P(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,r=[];try{return typeof t=="function"&&(t=t.call(e,e)),r=Array.isArray(t)?t:typeof t=="string"?t.split(n):[],r.length>0?T(e,r):e}catch(a){return e}}function Lt(e,t,n){var r=t==null?n:t;if(typeof r=="function")try{r=r.call(e,e)}catch(a){}return r==null?n==null?w.Root:n:r}function zt(e,t){var n=t.values,r=t.type,a=t.valuePath,i=t.funcOptions,u=t.storeOptions,o=t.computedType,c=e;if(typeof u.onComputedContext=="function"){var f=u.onComputedContext.call(e,e,{computedType:o,contextType:r,valuePath:a});f!==void 0&&(c=f)}var p=a.length>=1?a.slice(0,a.length-1):[],s=Lt(e,r=="context"?i.context:i.scope,r=="context"?u.computedThis&&u.computedThis(o):u.computedScope&&u.computedScope(o));try{if(s===w.Current)return P(e,p);if(s===w.Parent)return P(e,a.slice(0,a.length-2));if(s===w.Root)return c;if(s===w.Depends)return Array.isArray(n)?n.map(function(h){return typeof h=="function"?h():h}):[];if(typeof s=="string")return P(e,[].concat(j()(p),j()(s.split(O))));if(Array.isArray(s))if(s.length>0&&s[0].startsWith("@")){var d=P(e,[].concat(j()(s[0].substring(1).split(O)),j()(s.slice(1))));return P(e,d)}else return P(e,s);else if(typeof s=="number"){var v=s>a.length-2?a.length-s-1:0;return P(e,a.slice(0,v))}else return e}catch(h){return e}}function St(e,t,n,r,a){var i=n.valuePath,u=n.dependValues;return zt(t,{input:u,type:a,valuePath:i,funcOptions:r,storeOptions:e.options,computedType:"Computed"})}function Jt(e,t,n,r){return St(e,t,n,r,"scope")}function Yt(e,t,n,r){return St(e,t,n,r,"context")}function Ot(e,t,n,r){var a=n.options.onCreateComputed;if(typeof a=="function"&&typeof t=="function"){var i=a.call(n,e,t,r);r.scope||(r.scope=w.Current),r.context||(r.context=w.Root),typeof i=="function"&&(t=i)}}function Zt(e,t){var n=t.id||Q(e,t.id),r=t.selfState?n:e.join(O);return[n,r]}function Me(e,t,n){var r=e.valuePath,a=e.id,i=e.name,u=e.resultPath,o=e.getter,c=t.selfState;n.reactiveable.createComputed({onComputed:function(p){var s=p.draft,d=p.input;if(!t.enable){n.options.log("Sync computed <".concat(i,"> is disabled"),"warn");return}n.options.log("Run sync computed for : ".concat(i));var v=c?s:getComputedContextDraft(n,s,e,t),h=c?s:getComputedScopeDraft(n,s,e,t),g=t.initial;try{g=o.call(v,h)}catch(A){if(typeof t.onError=="function")try{var b;(b=t.onError)===null||b===void 0||b.call(v,A)}catch(m){}}c?c.setState(function(A){setVal(A,u,g)}):setVal(s,u,g)},options:t})}function rt(e,t){var n=e.path,r=e.parent,a=e.value;if(!(r&&!Object.hasOwn(r,n[n.length-1]))){var i=a(),u=i.fn,o=i.options;Ot(n,u,t,o);var c=Zt(n,o),f=U()(c,2),p=f[0],s=f[1];t.options.log("Create sync computed: ".concat(s)),isExternal||e.replaceValue(T(t.stateCtx.state,n));var d={id:s,mutate,group:o.group,async:!1,options:o,get enable(){return o.enable},set enable(v){o.enable=v},run:function(h){var g={desc:p,extraArgs:h};return isExternal?computedTo.stateCtx.runMutateTask(g):t.stateCtx.runMutateTask(g)}};return t.computedObjects.set(s,d),d}}var Qt=l(90393),E=l.n(Qt),Xt=l(7392),L=l.n(Xt),qt=l(44340),_t=l(10346),te=l(77937),G=l.n(te),ee=l(41176),K=l.n(ee),ne=l(79862),D=l.n(ne),re=function(){function e(t,n,r){G()(this,e),D()(this,"options",void 0),this.store=t,this.selfState=n,this.options=Object.assign({},r)}return K()(e,[{key:"id",get:function(){return Q(this.options.selfPath,this.options.id)}},{key:"enable",get:function(){return this.options.enable},set:function(n){this.options.enable=n}},{key:"group",get:function(){return this.options.group}},{key:"async",get:function(){return this.options.async}},{key:"run",value:function(n){var r;return(r=this.store.options.reactiveable)===null||r===void 0?void 0:r.runComputed(this.id,n)}},{key:"cancel",value:function(){}}]),e}();function q(e,t,n){return Object.assign({loading:!1,timeout:0,retry:0,error:null,progress:0,run:(0,y.markRaw)(X(function(r){return e.reactiveable.runComputed(t,Object.assign({},r))})),cancel:(0,y.markRaw)(X(function(){console.log("cancel")}))},n)}function jt(e,t,n,r,a){var i=q(e,r,a),u=T(t,n);Object.assign(u,i,a)}function ae(e,t,n){var r=Object.assign({},n),a=r.max,i=a===void 0?100:a,u=r.min,o=u===void 0?0:u,c=r.value,f=c===void 0?0:c;return e(function(p){return $(p,[].concat(j()(t),["progress"]),f)}),{value:function(s){s>i&&(s=i),s<o&&(s=o),e(function(d){return $(d,[].concat(j()(t),["progress"]),s)})},end:function(){this.value(i)}}}function z(e,t,n){e(function(r){Object.entries(n).forEach(function(a){var i=U()(a,2),u=i[0],o=i[1];$(r,[].concat(j()(t),[u]),o)})})}function ie(e,t,n,r){return at.apply(this,arguments)}function at(){return at=L()(E()().mark(function e(t,n,r,a){var i,u,o,c,f,p,s,d,v,h,g,b,A,m,H,M,I,dt,S,It,k;return E()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:i=n.valuePath,u=n.getter,o=n.resultPath,c=r.timeout,f=c===void 0?0:c,p=r.retry,s=p===void 0?[0,0]:p,d=r.selfState,v=d?d.setState:a.setState,h=d?t:Yt(a,t,n,r),g=d?t:Jt(a,t,n,r),b=Array.isArray(s)?s:[Number(s),0],A=U()(b,2),m=A[0],H=A[1],I=new AbortController,dt={onTimeout:function(R){return M=R},getProgressbar:function(R){return ae(v,i,R)},getSnap:function(R){return(0,y.getSnap)(R,!1)},abortSignal:I.signal,cancel:I.abort},S=!1,z(v,o,{cancel:(0,y.markRaw)(X(function(){return I.abort()}))}),I.signal.addEventListener("abort",function(){S=!0}),It=E()().mark(function tt(){var R,et,B,Y,Ee,W,Rt,pt,vt,Z,ht,N,Vt;return E()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(B=!1,Y=!1,Ee=k>0,W={},C.prev=2,Rt=Array.isArray(f)?f:[f,0],pt=U()(Rt,2),vt=pt[0],Z=vt===void 0?0:vt,ht=pt[1],N=ht===void 0?0:ht,z(v,o,{loading:!0,error:null,retry:k>0?m-k:0,timeout:N>1?N:Z,progress:0}),!S){C.next=7;break}throw new Error("Aborted");case 7:return Z>0&&(R=setTimeout(function(){Y=!0,typeof M=="function"&&M(),B||(clearInterval(et),z(v,o,{loading:!1,error:"TIMEOUT",timeout:0}))},Z),N>1&&(et=setInterval(function(){z(v,o,{timeout:N--}),N===0&&clearInterval(et)},Z/N))),C.next=10,u.call(h,g,dt);case 10:Vt=C.sent,Y||Object.assign(W,{result:Vt,error:null,timeout:0}),C.next=20;break;case 14:if(C.prev=14,C.t0=C.catch(2),B=!0,typeof r.onError=="function")try{r.onError.call(h,C.t0)}catch(De){}Y||Object.assign(W,{error:Wt(C.t0).message,timeout:0}),m>0&&Object.assign(W,{retry:m-k});case 20:return C.prev=20,clearTimeout(R),clearInterval(et),(!B||k==m)&&Object.assign(W,{loading:!1}),!B&&!Y&&Object.assign(W,{error:null}),z(v,o,W),C.finish(20);case 27:if(!B){C.next=31;break}if(!(m>0&&H>0&&k<m)){C.next=31;break}return C.next=31,(0,_t.g)(H);case 31:case"end":return C.stop()}},tt,null,[[2,14,20,27]])}),k=0;case 13:if(!(k<m+1)){F.next=18;break}return F.delegateYield(It(),"t0",15);case 15:k++,F.next=13;break;case 18:case"end":return F.stop()}},e)})),at.apply(this,arguments)}function ue(e,t,n){var r=e.valuePath,a=e.id,i=e.deps,u=e.name,o=e.resultPath,c=e.isMutateRunning,f=e.getter,p=t.toComputedResult,s=t.selfState,d=t.initial,v=t.noReentry;n.reactiveable.createAsyncComputed({depends:function(g){return Ut(i,g,r)},initial:function(g){if(s)s.setState(function(A){Object.assign(A,q(n,a,{result:d}))});else if(p=="self")$(g,r,q(n,a,{result:d}));else{jt(n.stateCtx,g,o,a,{result:d});var b=T(g,r.slice(0,r.length-1));delete b[r[r.length-1]]}},onComputed:function(){var h=L()(E()().mark(function b(A){var m,H,M,I;return E()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(m=A.draft,H=A.values,M=A.options,!(!t.enable&&(M==null?void 0:M.enable)!==!0)){S.next=4;break}return n.options.log("Async computed <".concat(u,"> is disabled"),"warn"),S.abrupt("return");case 4:if(n.options.log("Run async computed for : ".concat(u)),I=Object.assign({},t,M),!(v&&c&&n.options.debug)){S.next=9;break}return n.options.log("Reentry async computed: ".concat(u),"warn"),S.abrupt("return");case 9:return e.isMutateRunning=!0,e.values=H,S.prev=11,S.next=14,ie(m,e,I,n);case 14:return S.abrupt("return",S.sent);case 15:return S.prev=15,e.isMutateRunning=!1,S.finish(15);case 18:case"end":return S.stop()}},b,null,[[11,,15,18]])}));function g(b){return h.apply(this,arguments)}return g}(),options:t})}function oe(e,t){var n=e.path,r=t.selfState,a=t.toComputedResult,i=a===void 0?"self":a;return r?[n]:(0,qt.d)(i,{self:n,root:[],parent:n.slice(0,n.length-2),current:n.slice(0,n.length-1),Array:i,String:[].concat(j()(n.slice(0,n.length-1)),[String(i).split(O)])},{defaultValue:n})}function it(e,t){var n=e.path,r=e.parent,a=e.value;if(!(r&&!Object.hasOwn(r,n[n.length-1]))){var i=a(),u=i.getter,o=i.options;o.async=!0,Ot(n,u,t,o);var c=o.depends,f=c===void 0?[]:c,p=o.selfState,s=oe(e,o),d=Gt(f);d.length==0&&t.options.log("async computed <".concat(n.join("."),"> should specify depends"),"warn");var v=o.id||Q(n,o.id),h=p?v:n.join(O);t.options.log("Create async computed: ".concat(h," (depends=").concat(d.length==0?"None":V(d),")"));var g={id:o.id||Q(n,o.id),name:p?v:n.join(O),resultPath:s,isMutateRunning:!1,values:[],valuePath:n,deps:d,getter:u};ue(g,o,t),p||e.replaceValue(T(t.state,n));var b=new re(t,p,o);return t.computedObjects.set(v,b),b}}var At=l(20649);function ut(e,t,n){var r=e.value,a;if(r.__COMPUTED__=="async"?a=it(e,t):r.__COMPUTED__=="sync"?a=rt(e,t):(0,At.$)(r)?(e.value=function(){return{fn:r,options:{depends:[],initial:void 0,immediate:!0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},a=it(e,t)):(e.value=function(){return{fn:r,options:{initial:void 0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},a=rt(e,t)),a&&typeof t.options.onCreateComputedObject=="function")try{t.options.onCreateComputedObject(e.path,a)}catch(i){t.options.log(i.stack,"error")}}var se=l(71698),ot=l.n(se),ce=l(44114),J=l.n(ce),le=l(19365),fe=l.n(le),de=l(72904),pe=l.n(de),ve=l(65523),st=l.n(ve),he=l(7122),ct=l.n(he),ge=l(19108),wt=l.n(ge);function Et(e,t,n){if(typeof e!="function")throw new Error("computed getter must be a function");var r=[],a={async:!1,enable:!0,timeout:0,depends:[],toComputedResult:w.Self,immediate:!0};if(arguments.length==1)r=[];else if(arguments.length==2)if(Array.isArray(arguments[1]))r=arguments[1];else if(Ht()(arguments[1])=="object")Object.assign(a,arguments[1]);else throw new Error("invalid arguments");else arguments.length>=3&&(r=arguments[1],Object.assign(a,arguments[2]));var i=a.async===!0||(0,At.$)(e)||arguments.length>=2&&Array.isArray(t);a.async=i,a.depends=r;var u=function(){return{getter:e,options:a}};return u.__COMPUTED__=i?"async":"sync",u}function _(){return Math.random().toString(36).slice(2)}function ye(e){return function(t,n){var r=Object.assign({id:_(),scope:e.stateCtx.state,context:e.stateCtx.state},n);if(!Array.isArray(r.depends)||r.depends.length==0)throw new Error("options.depends must be an array and not empty");var a=(0,y.sharex)({}),i={path:[],parent:null,value:Et(t,r.depends,n)};return ut(i,e),a}}var Tt=function(e){st()(n,e);var t=ct()(n);function n(r){var a;return G()(this,n),a=t.call(this),D()(J()(a),"_createComputed",void 0),a.store=r,a}return K()(n,[{key:"runGroup",value:function(){var r=L()(E()().mark(function i(u){return E()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Promise.all(j()(this.values()).filter(function(f){return f.group==u}).map(function(f){return f.async,f.run()})));case 1:case"end":return c.stop()}},i,this)}));function a(i){return r.apply(this,arguments)}return a}()},{key:"enableGroup",value:function(){var r=L()(E()().mark(function i(u){var o,c,f;return E()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:o=ot()(this.values());try{for(o.s();!(c=o.n()).done;)f=c.value,f.options.enable=u}catch(d){o.e(d)}finally{o.f()}case 2:case"end":return s.stop()}},i,this)}));function a(i){return r.apply(this,arguments)}return a}()},{key:"delete",value:function(a){return fe()(pe()(n.prototype),"delete",this).call(this,a)}},{key:"new",get:function(){return this._createComputed||(this._createComputed=ye(this.store)),this._createComputed}}]),n}(wt()(Map));function Pt(e){return typeof e=="function"?e:typeof e=="string"?function(t){return V(t)==V(e.split(O))}:Array.isArray(e)?function(t){return e.map(function(n){return typeof n=="string"?n.split(O):Array.isArray(n)?n:[String(n)]}).some(function(n){return V(t)==V(n)})}:function(){return!1}}function me(e,t,n){var r=Object.assign({depends:Pt(t),enable:!0},n),a=function(){return{listener:e,options:r}};return a.__COMPUTED__="watch",a}function lt(e){return function(t,n){var r=(0,y.watch)(function(i){var u=i.triggerReasons,o=u.map(function(c){return c.keyPath});t(o)},function(){return n==null?void 0:n.map(function(i){return P(e.stateCtx.state,i)})}),a=r.unwatch;return a}}var Ce=l(70079);function ft(e,t){t.options.log("install watch for <".concat(e.path.length==0?"Dynamic":e.path.join(O),">"));var n=e.value();n.options.selfPath=e.path;var r=t.watchObjects.add(n),a=n.options.context;return a?a.setState(function(i){i.value=n.options.initial}):(e.replaceValue(n.options.initial),t.stateCtx.setState(function(i){$(i,e.path,n.options.initial)}),(0,y.flush)(t.stateCtx.state)),r}function Mt(e){return function(t,n,r){(0,Ce.useEffect)(function(){var a={path:["value"],parent:void 0,value:function(){var o={listener:t,options:Object.assign({depends:Pt(n),context:(0,y.sharex)({value:0}),selfPath:["value"],initial:0,enable:!0,scope:w.Depends},r)};return o}},i=ft(a,e);return function(){e.watchObjects.delete(i.id)}},[n])}}var kt=function(){function e(t,n){if(G()(this,e),D()(this,"_cache",void 0),D()(this,"_listener",void 0),D()(this,"_options",void 0),this.store=t,this._options=Object.assign({enable:!0,selfPath:[],group:void 0,context:void 0,initial:void 0},n.options),typeof this._options.depends!="function")throw new Error("watch options.depends must be a function");if(!this._options.id){var r=this._options.selfPath;this._options.id=this._options.id||this._options.context?_():V(r)}this._listener=n.listener}return K()(e,[{key:"id",get:function(){return this._options.id}},{key:"options",get:function(){return this._options}},{key:"selfPath",get:function(){return this._options.selfPath}},{key:"depends",get:function(){return this._options.depends}},{key:"enable",get:function(){return this._options.enable},set:function(n){this._options.enable=n}},{key:"cache",get:function(){return this._cache||(this._cache={}),this._cache}},{key:"value",get:function(){var n=this._options.context?this._options.context:this.store.state;return T((0,y.getSnap)(n),this.selfPath)}},{key:"getName",value:function(){return this._options.context?this.id:this.selfPath.join(O)}},{key:"reset",value:function(){this._cache={}}},{key:"run",value:function(n,r){var a=this;if(!this.enable){this.store.options.log("WatchObject <".concat(this.getName(),"> is disabled"));return}try{var i=this._listener.call(this,r,n,this);i!==void 0&&(this._options.context?this._options.context.setState(function(u){u.value=i}):this.store.setState(function(u){$(u,a.selfPath,i)}))}catch(u){}}}]),e}(),xt=function(e){st()(n,e);var t=ct()(n);function n(r){var a;return G()(this,n),a=t.call(this),D()(J()(a),"_off",void 0),D()(J()(a),"_enable",!0),a.store=r,r.on("created",a.onStateCreated.bind(J()(a))),a}return K()(n,[{key:"onStateCreated",value:function(){this.createWacher()}},{key:"enable",get:function(){return this._enable},set:function(a){this._enable=a}},{key:"createWacher",value:function(){var a=this,i=(0,y.watch)(function(o){var c=o.triggerReasons;if(a._enable){var f=c.map(function(p){return p.keyPath});f.forEach(function(p){var s=T(a.store.state,p),d=ot()(a.values()),v;try{for(d.s();!(v=d.n()).done;){var h=v.value;h.depends(p,s)&&h.run(p,s)}}catch(g){d.e(g)}finally{d.f()}})}},function(){return[a.store.state]}),u=i.unwatch;this._off=u}},{key:"reset",value:function(){this._off&&this._off(),this.createWacher()}},{key:"add",value:function(a){var i=new kt(this.store,a);return this.set(i.id,i),i}},{key:"enableGroup",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,u=ot()(this.values()),o;try{for(u.s();!(o=u.n()).done;){var c=o.value;c.options.group==a&&(c.options.enable=i)}}catch(f){u.e(f)}finally{u.f()}}}]),n}(wt()(Map));function Dt(e,t){var n=e.path,r=e.value,a=n.join(".");typeof r=="function"&&!t._replacedKeys[a]&&!yt(r)&&(t._replacedKeys[a]=!0,r.__COMPUTED__=="watch"?ft(e,t):ut(e,t))}function be(e){return function(t,n){var r=e.stateCtx.useState;if(t==null)return r();var a=r(),i=U()(a,2),u=i[0],o=i[1],c=t(u),f=o;return typeof n=="function"&&(f=function(s){o(function(d){n.call(d,d,s)})}),[c,f]}}function Se(e){return function(t){e.stateCtx.setState(function(n){t(n)})}}var Oe=l(24222),je=function(){function e(t,n){G()(this,e)}return K()(e,[{key:"state",get:function(){throw new Error("Method not implemented.")}},{key:"useState",value:function(n,r){throw new Error("Method not implemented.")}},{key:"setState",value:function(n){throw new Error("Method not implemented.")}},{key:"createAsyncComputed",value:function(n){throw new Error("Method not implemented.")}},{key:"createComputed",value:function(n){throw new Error("Method not implemented.")}},{key:"runComputed",value:function(n,r){throw new Error("Method not implemented.")}}]),e}(),Ae=function(e){st()(n,e);var t=ct()(n);function n(r,a){var i,u;return G()(this,n),u=t.call(this,r,a),D()(J()(u),"_stateCtx",void 0),u._stateCtx=(0,y.sharex)(r,{stopArrDep:!1,moduleName:(i=a.id)!==null&&i!==void 0?i:_(),onRead:function(c){a.onRead(c)}}),u}return K()(n,[{key:"state",get:function(){return this._stateCtx.state}},{key:"useState",value:function(a,i){var u=this._stateCtx.useState(),o=U()(u,2),c=o[0],f=o[1],p=typeof a=="function"?a(c):c,s=typeof i=="function"?function(d){f(function(v){i.call(v,v,d)})}:f;return[p,s]}},{key:"setState",value:function(a){this._stateCtx.setState(a)}},{key:"createAsyncComputed",value:function(a){var i=a.initial,u=a.onComputed,o=a.depends,c=a.options;return this._stateCtx.mutate({deps:function(p){return typeof o=="function"?o(p):null},fn:function(p,s){s.isFirstCall&&typeof i=="function"&&i(p,s)},task:function(){var f=L()(E()().mark(function s(d){var v,h,g,b;return E()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(v=d.draft,h=d.setState,g=d.input,b=d.extraArgs,typeof i!="function"){m.next=3;break}return m.abrupt("return",u({draft:v,setState:h,values:g,options:Object.assign({},b)}));case 3:case"end":return m.stop()}},s)}));function p(s){return f.apply(this,arguments)}return p}(),immediate:c.immediate,desc:c.id,checkDeadCycle:!1}),c.id}},{key:"createComputed",value:function(a){var i=a.onComputed,u=a.options;return this._stateCtx.mutate({fn:function(c,f){typeof i=="function"&&i({draft:c,setState,values:input})},desc:u.id,checkDeadCycle:!1}),u.id}},{key:"runComputed",value:function(a,i){var u={desc:a,extraArgs:i};this._stateCtx.runMutateTask(u)}}]),n}(je);function we(e,t){var n=Object.assign({id:_(),debug:!0,computedThis:function(){return w.Root},computedScope:function(){return w.Current},singleton:!0},t);n.log=function(){n.debug&&Bt.apply(void 0,arguments)};var r=(0,Oe.Z)(),a={options:n,on:r.on,off:r.off,emit:r.emit,_replacedKeys:{}};return a.computedObjects=new Tt(a),a.watchObjects=new xt(a),a.reactiveable=new Ae(e,{id:n.id,onRead:function(u){Dt(u,a)}}),a.stateCtx=(0,y.sharex)(e,{stopArrDep:!1,moduleName:n.id,onRead:function(u){Dt(u,a)}}),a.state=a.stateCtx.reactive,a.emit("created"),a.useState=be(a),a.setState=Se(a),a.enableComputed=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return a.stateCtx.setEnableMutate(i)},a.sync=a.stateCtx.sync,a.watch=lt(a),a.useWatch=Mt(a),a.watch=lt(a),a}},43095:function(gt){function x(l){var y=new Error("Cannot find module '"+l+"'");throw y.code="MODULE_NOT_FOUND",y}x.keys=function(){return[]},x.resolve=x,x.id=43095,gt.exports=x}}]);
