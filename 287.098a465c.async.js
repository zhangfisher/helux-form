(self.webpackChunkspeedform_docs=self.webpackChunkspeedform_docs||[]).push([[287],{71123:function(St,z,l){"use strict";l.r(z),l.d(z,{$:function(){return m.$},ComputedObjects:function(){return $t},ComputedScopeRef:function(){return M},OBJECT_PATH_DELIMITER:function(){return R},SKIP_COMPUTED:function(){return lt},WatchObject:function(){return Vt},WatchObjects:function(){return Ut},computed:function(){return Pt},createAsyncComputedMutate:function(){return vt},createAsyncComputedObject:function(){return X},createComputedMutate:function(){return ft},createObject:function(){return m.share},createStore:function(){return xe},createUseWatch:function(){return Wt},createWatch:function(){return Ct},getSnap:function(){return m.getSnap},getVal:function(){return K},getValueByPath:function(){return B},installComputed:function(){return ht},installWatch:function(){return bt},isIncludePath:function(){return zt},isSkipComputed:function(){return At},markRaw:function(){return m.markRaw},setAsyncComputedObject:function(){return pt},setVal:function(){return H},skipComputed:function(){return ut},watch:function(){return he}});var m=l(67687),M=function(e){return e.Root="root",e.Current="current",e.Parent="parent",e.Depends="depends",e.Self="self",e}({});function J(e){return(e||[]).map(function(t){return Array.isArray(t)?t.join("."):t}).join("_")}function jt(e,t){var a="";return typeof t=="function"?a=t(e):typeof t=="string"?a=t:a=J(e),a}function Kt(e){return e instanceof Error?e:new Error(e)}var R="/",lt=Symbol("SKIP_COMPUTED");function At(e){return e[lt]===!0}var Ft=l(79664),T=l.n(Ft);function wt(e,t){if(!Array.isArray(e))throw new Error("path must be an array");return t==="self"?e:t==="root"?[]:t==="parent"?e.slice(0,-2):t==="current"?e.slice(0,-1):typeof t=="string"?t.startsWith("./")?[].concat(T()(e.slice(0,-1)),T()(t.slice(2).split(R))):t.startsWith("../")?wt(e.slice(0,-1),t.slice(3)):(t.includes(".")&&(console.warn('[@speedform/reactive] The dependency path uses "/" as the separator, and will automatically convert'),t=t.replaceAll(".","/")),[].concat(T()(e.slice(0,-1)),T()(t.split(R)))):Array.isArray(t)?t:e}function Rt(e,t){var a=e.get(t);if(a!==void 0)return a;var n=e.get(Number(t)||t);if(n!==void 0)return n}function Et(e){return toString.call(e)==="[object Map]"}function K(e,t){if(t.length===0)return e;var a,n=e;return t.forEach(function(r){a=Et(n)?Rt(n,r):n[r],n=a}),a}function kt(e,t,a){return e.map(function(n){return K(t,wt(a,n))})}function Ht(e){return(e||[]).map(function(t){return Array.isArray(t)?t:typeof t=="string"?t.startsWith("./")||t.startsWith("../")?t:t.includes(R)?t.split(R):t.split("."):[]})}var Bt=l(26851),Lt=l.n(Bt);function Se(e){return _typeof(e)=="object"&&e.hasOwnProperty("__COMPUTED__")&&["async","sync"].includes(e.__COMPUTED__)&&e.hasOwnProperty("fn")&&typeof e.fn=="function"&&e.hasOwnProperty("options")&&_typeof(e.options)=="object"}function je(e){return _typeof(e)=="object"&&["result","loading","timeout","retry","run"].every(function(t){return e.hasOwnProperty(t)})}function zt(e,t){return e.length>t.length?!1:e.every(function(a,n){return a===t[n]})}function Jt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log",a=typeof e=="function"?e():e instanceof Error?e.stack:e;try{var n;(n=console)[t].apply(n,["[@speedform/reactive] "].concat(T()(Array.isArray(a)?a:[a])))}catch(r){}}function H(e,t,a){var n=e,r=t.length-1;t.forEach(function(u,o){var s=Et(n);if(o===r){s?n.set(u,a):n[u]=a;return}var i=s?Rt(n,u):n[u];n=i})}function ut(e){return e[lt]=!0,e}function B(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R,n=[];try{return typeof t=="function"&&(t=t.call(e,e)),n=Array.isArray(t)?t:typeof t=="string"?t.split(a):[],n.length>0?K(e,n):e}catch(r){return e}}function Yt(e,t,a){var n=t==null?a:t;if(typeof n=="function")try{n=n.call(e,e)}catch(r){}return n==null?a==null?M.Root:a:n}function Zt(e,t){var a=t.input,n=t.type,r=t.valuePath,u=t.funcOptions,o=t.storeOptions,s=t.computedType,i=e;if(typeof o.onComputedContext=="function"){var f=o.onComputedContext.call(e,e,{computedType:s,contextType:n,valuePath:r});f!==void 0&&(i=f)}var p=r.length>=1?r.slice(0,r.length-1):[],c=Yt(e,n=="context"?u.context:u.scope,n=="context"?o.computedThis&&o.computedThis(s):o.computedScope&&o.computedScope(s));try{if(c===M.Current)return B(e,p);if(c===M.Parent)return B(e,r.slice(0,r.length-2));if(c===M.Root)return i;if(c===M.Depends)return Array.isArray(a)?a.map(function(C){return typeof C=="function"?C():C}):[];if(typeof c=="string")return B(e,[].concat(T()(p),T()(c.split(R))));if(Array.isArray(c))if(c.length>0&&c[0].startsWith("@")){var v=B(e,[].concat(T()(c[0].substring(1).split(R)),T()(c.slice(1))));return B(e,v)}else return B(e,c);else if(typeof c=="number"){var h=c>r.length-2?r.length-c-1:0;return B(e,r.slice(0,h))}else return e}catch(C){return e}}function it(e,t){var a=this.options,n=t.input,r=t.type,u=t.computedContext,o=t.computedOptions;return Zt(e,{input:n,type:r,valuePath:u.fullKeyPath,funcOptions:o,storeOptions:a,computedType:"Computed"})}function ft(e,t,a){var n=e.path,r=e.parent,u=e.value,o=u(),s=o.fn,i=o.options;if(!(r&&!Object.hasOwn(r,n[n.length-1]))){var f=t.options.onCreateComputed;if(typeof f=="function"&&typeof s=="function"){var p=f.call(t,n,s,i);i.scope||(i.scope=M.Current),i.context||(i.context=M.Root),typeof p=="function"&&(s=p)}var c=a!==void 0,v=c?i.id:jt(n,i.id),h=c?v:n.join(R);t.options.log("Create sync computed: ".concat(h));var C=t.stateCtx.mutate({fn:function(A,E){if(!i.enable){t.options.log("Sync computed <".concat(h,"> is disabled"),"warn");return}t.options.log("Run sync computed for : ".concat(h));var P=E.input,b=c?A:it.call(t,A,{input:P,computedOptions:i,computedContext:e,type:"context"}),F=c?A:it.call(t,A,{input:P,computedOptions:i,computedContext:e,type:"scope"}),$=i.initial;try{$=s.call(b,F)}catch(w){if(typeof i.onError=="function")try{var O;(O=i.onError)===null||O===void 0||O.call(b,w)}catch(rt){}}c?a.stateCtx.setState(function(w){Object.assign(w,$)}):H(A,n,$)},desc:v,checkDeadCycle:!1});c||e.replaceValue(K(t.stateCtx.state,n));var x={id:h,mutate:C,group:i.group,async:!1,options:i,get enable(){return i.enable},set enable(W){i.enable=W},run:function(A){var E={desc:v,extraArgs:A};return c?a.stateCtx.runMutateTask(E):t.stateCtx.runMutateTask(E)}};return t.computedObjects.set(h,x),x}}var Qt=l(90393),D=l.n(Qt),Xt=l(7392),Q=l.n(Xt),qt=l(70125),q=l.n(qt),_t=l(44340),te=l(10346);function X(e,t,a){return Object.assign({loading:!1,timeout:0,retry:0,error:null,progress:0,run:(0,m.markRaw)(ut(function(n){return e.runMutateTask({desc:t,extraArgs:n})})),cancel:(0,m.markRaw)(ut(function(){console.log("cancel")}))},a)}function pt(e,t,a,n,r){var u=X(e,n,r),o=K(t,a);Object.assign(o,u,r)}function ee(e,t,a){var n=Object.assign({},a),r=n.max,u=r===void 0?100:r,o=n.min,s=o===void 0?0:o,i=n.value,f=i===void 0?0:i;return e(function(p){return H(p,[].concat(T()(t),["progress"]),f)}),{value:function(c){c>u&&(c=u),c<s&&(c=s),e(function(v){return H(v,[].concat(T()(t),["progress"]),c)})},end:function(){this.value(u)}}}function _(e,t,a){e(function(n){Object.entries(a).forEach(function(r){var u=q()(r,2),o=u[0],s=u[1];H(n,[].concat(T()(t),[o]),s)})})}function Mt(e,t,a,n){return dt.apply(this,arguments)}function dt(){return dt=Q()(D()().mark(function e(t,a,n,r){var u,o,s,i,f,p,c,v,h,C,x,W,A,E,P,b,F,$,O,w,rt,st,V;return D()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:u=n.input,o=n.computedOptions,s=n.computedContext,i=n.computedResultPath,f=r!==void 0,p=f?r.stateCtx.setState:n.setState,c=f?t:it.call(this,t,{input:u,computedOptions:o,computedContext:s,type:"context"}),v=f?t:it.call(this,t,{input:u,computedOptions:o,computedContext:s,type:"scope"}),h=s.fullKeyPath,C=o.timeout,x=C===void 0?0:C,W=o.retry,A=W===void 0?[0,0]:W,E=Array.isArray(A)?A:[Number(A),0],P=q()(E,2),b=P[0],F=P[1],O=new AbortController,w={onTimeout:function(y){return $=y},getProgressbar:function(y){return ee(p,h,y)},getSnap:function(y){return(0,m.getSnap)(y,!1)},abortSignal:O.signal,cancel:O.abort},rt=!1,_(p,i,{cancel:(0,m.markRaw)(ut(function(){return O.abort()}))}),O.signal.addEventListener("abort",function(){rt=!0}),st=D()().mark(function j(){var y,N,G,k,L,I,ct,d,Ot,at,xt,Z,Gt;return D()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(G=!1,k=!1,L=V>0,I={},S.prev=2,ct=Array.isArray(x)?x:[x,0],d=q()(ct,2),Ot=d[0],at=Ot===void 0?0:Ot,xt=d[1],Z=xt===void 0?0:xt,_(p,i,{loading:!0,error:null,retry:V>0?b-V:0,timeout:Z>1?Z:at,progress:0}),!rt){S.next=7;break}throw new Error("Aborted");case 7:return at>0&&(y=setTimeout(function(){k=!0,typeof $=="function"&&$(),G||(clearInterval(N),_(p,i,{loading:!1,error:"TIMEOUT",timeout:0}))},at),Z>1&&(N=setInterval(function(){_(p,i,{timeout:Z--}),Z===0&&clearInterval(N)},at/Z))),S.next=10,a.call(c,v,w);case 10:Gt=S.sent,k||Object.assign(I,{result:Gt,error:null,timeout:0}),S.next=20;break;case 14:if(S.prev=14,S.t0=S.catch(2),G=!0,typeof o.onError=="function")try{o.onError.call(c,S.t0)}catch(we){}k||Object.assign(I,{error:Kt(S.t0).message,timeout:0}),b>0&&Object.assign(I,{retry:b-V});case 20:return S.prev=20,clearTimeout(y),clearInterval(N),(!G||V==b)&&Object.assign(I,{loading:!1}),!G&&!k&&Object.assign(I,{error:null}),_(p,i,I),S.finish(20);case 27:if(!G){S.next=31;break}if(!(b>0&&F>0&&V<b)){S.next=31;break}return S.next=31,(0,te.g)(F);case 31:case"end":return S.stop()}},j,null,[[2,14,20,27]])}),V=0;case 15:if(!(V<b+1)){g.next=20;break}return g.delegateYield(st(),"t0",17);case 17:V++,g.next=15;break;case 20:case"end":return g.stop()}},e,this)})),dt.apply(this,arguments)}function vt(e,t,a){var n=e.path,r=e.parent,u=e.value;if(!(r&&!Object.hasOwn(r,n[n.length-1]))){var o=u(),s=o.getter,i=o.options;i.async=!0;var f=t.options.onCreateComputed;if(typeof f=="function"&&typeof s=="function"){var p=f.call(t,n,s,i);i.scope||(i.scope=M.Current),i.context||(i.context=M.Root),typeof p=="function"&&(s=p)}var c=i.depends,v=c===void 0?[]:c,h=i.initial,C=i.toComputedResult,x=C===void 0?"self":C,W=i.immediate,A=i.noReentry,E=A===void 0?!1:A,P=!1,b=a!==void 0,F=b?[]:(0,_t.d)(x,{self:n,root:[],parent:n.slice(0,n.length-2),current:n.slice(0,n.length-1),Array:x,String:[].concat(T()(n.slice(0,n.length-1)),[String(x).split(R)])},{defaultValue:n}),$=Ht(v);$.length==0&&t.options.log("async computed <".concat(n.join("."),"> should specify depends"),"warn");var O=b?i.id:jt(n,i.id),w=b?O:n.join(R);t.options.log("Create async computed: ".concat(w," (depends=").concat($.length==0?"None":J($),")"));var rt=t.reactiveable.createComputed({depends:function(g){return kt($,g,n)},initial:function(g){if(b)a.stateCtx.setState(function(y){Object.assign(y,X(a.stateCtx,O,{result:h}))});else if(x=="self")H(g,n,X(t.stateCtx,O,{result:h}));else{pt(t.stateCtx,g,F,O,{result:h});var j=K(g,n.slice(0,n.length-1));delete j[n[n.length-1]]}},onComputed:function(){var U=Q()(D()().mark(function j(y){var N,G,k,L,I;return D()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(N=y.draft,G=y.setState,k=y.input,L=y.options,!(!i.enable&&(k==null?void 0:k.enable)!==!0)){d.next=4;break}return t.options.log("Async computed <".concat(w,"> is disabled"),"warn"),d.abrupt("return");case 4:if(t.options.log("Run async computed for : ".concat(w)),I=Object.assign({},i,k),!(E&&P&&t.options.debug)){d.next=9;break}return t.options.log("Reentry async computed: ".concat(w),"warn"),d.abrupt("return");case 9:return P=!0,d.prev=10,d.next=13,Mt.call(t,N,s,{input:k,computedResultPath:F,computedOptions:I,computedContext:e,setState:G},a);case 13:return d.abrupt("return",d.sent);case 14:return d.prev=14,P=!1,d.finish(14);case 17:case"end":return d.stop()}},j,null,[[10,,14,17]])}));function g(j){return U.apply(this,arguments)}return g}(),getter:function(){},options:i}),st=t.stateCtx.mutate({deps:function(g){return kt($,g,n)},fn:function(g,j){if(j.isFirstCall)if(b)a.stateCtx.setState(function(N){Object.assign(N,X(a.stateCtx,O,{result:h}))});else if(x=="self")H(g,n,X(t.stateCtx,O,{result:h}));else{pt(t.stateCtx,g,F,O,{result:h});var y=K(g,n.slice(0,n.length-1));delete y[n[n.length-1]]}},task:function(){var U=Q()(D()().mark(function j(y){var N,G,k,L,I;return D()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(N=y.draft,G=y.setState,k=y.input,L=y.extraArgs,!(!i.enable&&(L==null?void 0:L.enable)!==!0)){d.next=4;break}return t.options.log("Async computed <".concat(w,"> is disabled"),"warn"),d.abrupt("return");case 4:if(t.options.log("Run async computed for : ".concat(w)),I=Object.assign({},i,L),!(E&&P&&t.options.debug)){d.next=9;break}return t.options.log("Reentry async computed: ".concat(w),"warn"),d.abrupt("return");case 9:return P=!0,d.prev=10,d.next=13,Mt.call(t,N,s,{input:k,computedResultPath:F,computedOptions:I,computedContext:e,setState:G},a);case 13:return d.abrupt("return",d.sent);case 14:return d.prev=14,P=!1,d.finish(14);case 17:case"end":return d.stop()}},j,null,[[10,,14,17]])}));function g(j){return U.apply(this,arguments)}return g}(),immediate:W,desc:O,checkDeadCycle:!1});b||e.replaceValue(K(t.stateCtx.state,n));var V={id:w,mutate:st,group:i.group,async:!0,options:i,get enable(){return i.enable},set enable(U){i.enable=U},run:function(g){var j={desc:O,extraArgs:g};return b?a.stateCtx.runMutateTask(j):t.stateCtx.runMutateTask(j)}};return t.computedObjects.set(w,V),V}}var Tt=l(20649);function ht(e,t,a){var n=e.value,r;if(n.__COMPUTED__=="async"?r=vt(e,t,a):n.__COMPUTED__=="sync"?r=ft(e,t,a):(0,Tt.$)(n)?(e.value=function(){return{fn:n,options:{depends:[],initial:void 0,immediate:!0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},r=vt(e,t,a)):(e.value=function(){return{fn:n,options:{initial:void 0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},r=ft(e,t,a)),r&&typeof t.options.onCreateComputedObject=="function")try{t.options.onCreateComputedObject(e.path,r)}catch(u){t.options.log(u.stack,"error")}}var ne=l(71698),gt=l.n(ne),re=l(77937),tt=l.n(re),ae=l(41176),et=l.n(ae),ue=l(44114),nt=l.n(ue),ie=l(19365),oe=l.n(ie),se=l(72904),ce=l.n(se),le=l(65523),yt=l.n(le),fe=l(7122),mt=l.n(fe),pe=l(19108),Dt=l.n(pe),de=l(79862),Y=l.n(de);function Pt(e,t,a){if(typeof e!="function")throw new Error("computed getter must be a function");var n=[],r={async:!1,enable:!0,timeout:0,depends:[],toComputedResult:M.Self,immediate:!0};if(arguments.length==1)n=[];else if(arguments.length==2)if(Array.isArray(arguments[1]))n=arguments[1];else if(Lt()(arguments[1])=="object")Object.assign(r,arguments[1]);else throw new Error("invalid arguments");else arguments.length>=3&&(n=arguments[1],Object.assign(r,arguments[2]));var u=r.async===!0||(0,Tt.$)(e)||arguments.length>=2&&Array.isArray(t);r.async=u,r.depends=n;var o=function(){return{getter:e,options:r}};return o.__COMPUTED__=u?"async":"sync",o}function ot(){return Math.random().toString(36).slice(2)}function ve(e){return function(t,a){var n=Object.assign({id:ot(),scope:e.stateCtx.state,context:e.stateCtx.state},a);if(!Array.isArray(n.depends)||n.depends.length==0)throw new Error("options.depends must be an array and not empty");var r=(0,m.sharex)({}),u={path:[],parent:null,value:Pt(t,n.depends,a)};return ht(u,e),r}}var $t=function(e){yt()(a,e);var t=mt()(a);function a(n){var r;return tt()(this,a),r=t.call(this),Y()(nt()(r),"_createComputed",void 0),r.store=n,r}return et()(a,[{key:"runGroup",value:function(){var n=Q()(D()().mark(function u(o){return D()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(T()(this.values()).filter(function(f){return f.group==o}).map(function(f){return f.async?f.mutate.runTask():f.mutate.run()})));case 1:case"end":return i.stop()}},u,this)}));function r(u){return n.apply(this,arguments)}return r}()},{key:"enableGroup",value:function(){var n=Q()(D()().mark(function u(o){var s,i,f;return D()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=gt()(this.values());try{for(s.s();!(i=s.n()).done;)f=i.value,f.options.enable=o}catch(v){s.e(v)}finally{s.f()}case 2:case"end":return c.stop()}},u,this)}));function r(u){return n.apply(this,arguments)}return r}()},{key:"delete",value:function(r){var u;return(u=this.get(r))===null||u===void 0||u.mutate.cancel(),oe()(ce()(a.prototype),"delete",this).call(this,r)}},{key:"new",get:function(){return this._createComputed||(this._createComputed=ve(this.store)),this._createComputed}}]),a}(Dt()(Map));function It(e){return typeof e=="function"?e:typeof e=="string"?function(t){return J(t)==J(e.split(R))}:Array.isArray(e)?function(t){return e.map(function(a){return typeof a=="string"?a.split(R):Array.isArray(a)?a:[String(a)]}).some(function(a){return J(t)==J(a)})}:function(){return!1}}function he(e,t,a){var n=Object.assign({depends:It(t),enable:!0},a),r=function(){return{listener:e,options:n}};return r.__COMPUTED__="watch",r}function Ct(e){return function(t,a){var n=(0,m.watch)(function(u){var o=u.triggerReasons,s=o.map(function(i){return i.keyPath});t(s)},function(){return a==null?void 0:a.map(function(u){return B(e.stateCtx.state,u)})}),r=n.unwatch;return r}}var ge=l(70079);function bt(e,t){t.options.log("install watch for <".concat(e.path.length==0?"Dynamic":e.path.join(R),">"));var a=e.value();a.options.selfPath=e.path;var n=t.watchObjects.add(a),r=a.options.context;return r?r.setState(function(u){u.value=a.options.initial}):(e.replaceValue(a.options.initial),t.stateCtx.setState(function(u){H(u,e.path,a.options.initial)}),(0,m.flush)(t.stateCtx.state)),n}function Wt(e){return function(t,a,n){(0,ge.useEffect)(function(){var r={path:["value"],parent:void 0,value:function(){var s={listener:t,options:Object.assign({depends:It(a),context:(0,m.sharex)({value:0}),selfPath:["value"],initial:0,enable:!0,scope:M.Depends},n)};return s}},u=bt(r,e);return function(){e.watchObjects.delete(u.id)}},[a])}}var Vt=function(){function e(t,a){if(tt()(this,e),Y()(this,"_cache",void 0),Y()(this,"_listener",void 0),Y()(this,"_options",void 0),this.store=t,this._options=Object.assign({enable:!0,selfPath:[],group:void 0,context:void 0,initial:void 0},a.options),typeof this._options.depends!="function")throw new Error("watch options.depends must be a function");if(!this._options.id){var n=this._options.selfPath;this._options.id=this._options.id||this._options.context?ot():J(n)}this._listener=a.listener}return et()(e,[{key:"id",get:function(){return this._options.id}},{key:"options",get:function(){return this._options}},{key:"selfPath",get:function(){return this._options.selfPath}},{key:"depends",get:function(){return this._options.depends}},{key:"enable",get:function(){return this._options.enable},set:function(a){this._options.enable=a}},{key:"cache",get:function(){return this._cache||(this._cache={}),this._cache}},{key:"value",get:function(){var a=this._options.context?this._options.context:this.store.state;return K((0,m.getSnap)(a),this.selfPath)}},{key:"getName",value:function(){return this._options.context?this.id:this.selfPath.join(R)}},{key:"reset",value:function(){this._cache={}}},{key:"run",value:function(a,n){var r=this;if(!this.enable){this.store.options.log("WatchObject <".concat(this.getName(),"> is disabled"));return}try{var u=this._listener.call(this,n,a,this);u!==void 0&&(this._options.context?this._options.context.setState(function(o){o.value=u}):this.store.setState(function(o){H(o,r.selfPath,u)}))}catch(o){}}}]),e}(),Ut=function(e){yt()(a,e);var t=mt()(a);function a(n){var r;return tt()(this,a),r=t.call(this),Y()(nt()(r),"_off",void 0),Y()(nt()(r),"_enable",!0),r.store=n,n.on("created",r.onStateCreated.bind(nt()(r))),r}return et()(a,[{key:"onStateCreated",value:function(){this.createWacher()}},{key:"enable",get:function(){return this._enable},set:function(r){this._enable=r}},{key:"createWacher",value:function(){var r=this,u=(0,m.watch)(function(s){var i=s.triggerReasons;if(r._enable){var f=i.map(function(p){return p.keyPath});f.forEach(function(p){var c=K(r.store.state,p),v=gt()(r.values()),h;try{for(v.s();!(h=v.n()).done;){var C=h.value;C.depends(p,c)&&C.run(p,c)}}catch(x){v.e(x)}finally{v.f()}})}},function(){return[r.store.state]}),o=u.unwatch;this._off=o}},{key:"reset",value:function(){this._off&&this._off(),this.createWacher()}},{key:"add",value:function(r){var u=new Vt(this.store,r);return this.set(u.id,u),u}},{key:"enableGroup",value:function(r){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=gt()(this.values()),s;try{for(o.s();!(s=o.n()).done;){var i=s.value;i.options.group==r&&(i.options.enable=u)}}catch(f){o.e(f)}finally{o.f()}}}]),a}(Dt()(Map));function Nt(e,t){var a=e.path,n=e.value,r=a.join(".");typeof n=="function"&&!t._replacedKeys[r]&&!At(n)&&(t._replacedKeys[r]=!0,n.__COMPUTED__=="watch"?bt(e,t):ht(e,t))}function ye(e){return function(t,a){var n=e.stateCtx.useState;if(t==null)return n();var r=n(),u=q()(r,2),o=u[0],s=u[1],i=t(o),f=s;return typeof a=="function"&&(f=function(c){s(function(v){a.call(v,v,c)})}),[i,f]}}function me(e){return function(t){e.stateCtx.setState(function(a){t(a)})}}var Ce=l(24222),be=function(){function e(t,a){tt()(this,e)}return et()(e,[{key:"state",get:function(){throw new Error("Method not implemented.")}},{key:"useState",value:function(a,n){throw new Error("Method not implemented.")}},{key:"setState",value:function(a){throw new Error("Method not implemented.")}},{key:"createComputed",value:function(a){throw new Error("Method not implemented.")}},{key:"runComputed",value:function(a,n){throw new Error("Method not implemented.")}}]),e}(),Oe=function(e){yt()(a,e);var t=mt()(a);function a(n,r){var u,o;return tt()(this,a),o=t.call(this,n,r),Y()(nt()(o),"_stateCtx",void 0),o._stateCtx=(0,m.sharex)(n,{stopArrDep:!1,moduleName:(u=r.id)!==null&&u!==void 0?u:ot(),onRead:function(i){r.onRead(i)}}),o}return et()(a,[{key:"state",get:function(){return this._stateCtx.state}},{key:"useState",value:function(r,u){var o=this._stateCtx.useState(),s=q()(o,2),i=s[0],f=s[1],p=typeof r=="function"?r(i):i,c=typeof u=="function"?function(v){f(function(h){u.call(h,h,v)})}:f;return[p,c]}},{key:"setState",value:function(r){this._stateCtx.setState(r)}},{key:"createComputed",value:function(r){var u=r.initial,o=r.onComputed,s=r.depends,i=r.options;return this._stateCtx.mutate({deps:function(p){return s(p)},fn:function(p,c){c.isFirstCall&&u(p,c)},task:function(){var f=Q()(D()().mark(function c(v){var h,C,x,W;return D()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return h=v.draft,C=v.setState,x=v.input,W=v.extraArgs,E.abrupt("return",o({draft:h,setState:C,input:x,options:Object.assign({},W)}));case 2:case"end":return E.stop()}},c)}));function p(c){return f.apply(this,arguments)}return p}(),immediate:i.immediate,desc:i.id,checkDeadCycle:!1}),i.id}},{key:"runComputed",value:function(r,u){var o={desc:r,extraArgs:u};this._stateCtx.runMutateTask(o)}}]),a}(be);function xe(e,t){var a=Object.assign({id:ot(),debug:!0,computedThis:function(){return M.Root},computedScope:function(){return M.Current},singleton:!0},t);a.log=function(){a.debug&&Jt.apply(void 0,arguments)};var n=(0,Ce.Z)(),r={options:a,on:n.on,off:n.off,emit:n.emit,_replacedKeys:{}};return r.computedObjects=new $t(r),r.watchObjects=new Ut(r),r.reactiveable=new Oe(e,{id:a.id,onRead:function(o){Nt(o,r)}}),r.stateCtx=(0,m.sharex)(e,{stopArrDep:!1,moduleName:a.id,onRead:function(o){Nt(o,r)}}),r.state=r.stateCtx.reactive,r.emit("created"),r.useState=ye(r),r.setState=me(r),r.enableComputed=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r.stateCtx.setEnableMutate(u)},r.sync=r.stateCtx.sync,r.watch=Ct(r),r.useWatch=Wt(r),r.watch=Ct(r),r}},43095:function(St){function z(l){var m=new Error("Cannot find module '"+l+"'");throw m.code="MODULE_NOT_FOUND",m}z.keys=function(){return[]},z.resolve=z,z.id=43095,St.exports=z}}]);
