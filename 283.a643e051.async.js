(self.webpackChunkspeedform_docs=self.webpackChunkspeedform_docs||[]).push([[283],{10706:function(Ct,G,l){"use strict";l.r(G),l.d(G,{$:function(){return v.$},ComputedObjects:function(){return Mt},ComputedScopeRef:function(){return A},OBJECT_PATH_DELIMITER:function(){return x},SKIP_COMPUTED:function(){return st},WatchObject:function(){return It},WatchObjects:function(){return Wt},computed:function(){return Tt},createAsyncComputedMutate:function(){return ft},createAsyncComputedObject:function(){return rt},createComputedMutate:function(){return ct},createObject:function(){return v.share},createStore:function(){return xe},createUseWatch:function(){return Dt},createWatch:function(){return vt},getSnap:function(){return v.getSnap},getVal:function(){return V},getValueByPath:function(){return K},installComputed:function(){return pt},installWatch:function(){return ht},isIncludePath:function(){return zt},isSkipComputed:function(){return Ot},markRaw:function(){return v.markRaw},reactive:function(){return je},setAsyncComputedObject:function(){return At},setVal:function(){return F},skipComputed:function(){return et},watch:function(){return ye}});var v=l(67687),A=function(e){return e.Root="root",e.Current="current",e.Parent="parent",e.Depends="depends",e.Self="self",e}({});function L(e){return(e||[]).map(function(t){return Array.isArray(t)?t.join("."):t}).join("_")}function bt(e,t){var r="";return typeof t=="function"?r=t(e):typeof t=="string"?r=t:r=L(e),r}function Nt(e){return e instanceof Error?e:new Error(e)}var x="/",st=Symbol("SKIP_COMPUTED");function Ot(e){return e[st]===!0}var Gt=l(79664),E=l.n(Gt);function xt(e,t){if(!Array.isArray(e))throw new Error("path must be an array");return t==="self"?e:t==="root"?[]:t==="parent"?e.slice(0,-2):t==="current"?e.slice(0,-1):typeof t=="string"?t.startsWith("./")?[].concat(E()(e.slice(0,-1)),E()(t.slice(2).split(x))):t.startsWith("../")?xt(e.slice(0,-1),t.slice(3)):(t.includes(".")&&(console.warn('[@speedform/reactive] The dependency path uses "/" as the separator, and will automatically convert'),t=t.replaceAll(".","/")),[].concat(E()(e.slice(0,-1)),E()(t.split(x)))):Array.isArray(t)?t:e}function St(e,t){var r=e.get(t);if(r!==void 0)return r;var n=e.get(Number(t)||t);if(n!==void 0)return n}function jt(e){return toString.call(e)==="[object Map]"}function V(e,t){if(t.length===0)return e;var r,n=e;return t.forEach(function(a){r=jt(n)?St(n,a):n[a],n=r}),r}function Ft(e,t,r){return e.map(function(n){return V(t,xt(r,n))})}function Ht(e){return(e||[]).map(function(t){return Array.isArray(t)?t:typeof t=="string"?t.startsWith("./")||t.startsWith("../")?t:t.includes(x)?t.split(x):t.split("."):[]})}var Bt=l(26851),Lt=l.n(Bt);function Ae(e){return _typeof(e)=="object"&&e.hasOwnProperty("__COMPUTED__")&&["async","sync"].includes(e.__COMPUTED__)&&e.hasOwnProperty("fn")&&typeof e.fn=="function"&&e.hasOwnProperty("options")&&_typeof(e.options)=="object"}function Ee(e){return _typeof(e)=="object"&&["result","loading","timeout","retry","run"].every(function(t){return e.hasOwnProperty(t)})}function zt(e,t){return e.length>t.length?!1:e.every(function(r,n){return r===t[n]})}function Jt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log",r=typeof e=="function"?e():e instanceof Error?e.stack:e;try{var n;(n=console)[t].apply(n,["[@speedform/reactive] "].concat(E()(Array.isArray(r)?r:[r])))}catch(a){}}function F(e,t,r){var n=e,a=t.length-1;t.forEach(function(u,o){var s=jt(n);if(o===a){s?n.set(u,r):n[u]=r;return}var i=s?St(n,u):n[u];n=i})}function et(e){return e[st]=!0,e}function K(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x,n=[];try{return typeof t=="function"&&(t=t.call(e,e)),n=Array.isArray(t)?t:typeof t=="string"?t.split(r):[],n.length>0?V(e,n):e}catch(a){return e}}function Yt(e,t,r){var n=t==null?r:t;if(typeof n=="function")try{n=n.call(e,e)}catch(a){}return n==null?r==null?A.Root:r:n}function Zt(e,t){var r=t.input,n=t.type,a=t.valuePath,u=t.funcOptions,o=t.storeOptions,s=t.computedType,i=e;if(typeof o.onComputedContext=="function"){var f=o.onComputedContext.call(e,e,{computedType:s,contextType:n,valuePath:a});f!==void 0&&(i=f)}var p=a.length>=1?a.slice(0,a.length-1):[],c=Yt(e,n=="context"?u.context:u.scope,n=="context"?o.computedThis&&o.computedThis(s):o.computedScope&&o.computedScope(s));try{if(c===A.Current)return K(e,p);if(c===A.Parent)return K(e,a.slice(0,a.length-2));if(c===A.Root)return i;if(c===A.Depends)return Array.isArray(r)?r.map(function(y){return typeof y=="function"?y():y}):[];if(typeof c=="string")return K(e,[].concat(E()(p),E()(c.split(x))));if(Array.isArray(c))if(c.length>0&&c[0].startsWith("@")){var d=K(e,[].concat(E()(c[0].substring(1).split(x)),E()(c.slice(1))));return K(e,d)}else return K(e,c);else if(typeof c=="number"){var h=c>a.length-2?a.length-c-1:0;return K(e,a.slice(0,h))}else return e}catch(y){return e}}function nt(e,t){var r=this.options,n=t.input,a=t.type,u=t.computedContext,o=t.computedOptions;return Zt(e,{input:n,type:a,valuePath:u.fullKeyPath,funcOptions:o,storeOptions:r,computedType:"Computed"})}function ct(e,t,r){var n=e.fullKeyPath,a=e.parent,u=e.value,o=u(),s=o.fn,i=o.options;if(!(a&&!Object.hasOwn(a,n[n.length-1]))){var f=t.options.onCreateComputed;if(typeof f=="function"&&typeof s=="function"){var p=f.call(t,n,s,i);i.scope||(i.scope=A.Current),i.context||(i.context=A.Root),typeof p=="function"&&(s=p)}var c=r!==void 0,d=c?i.id:bt(n,i.id),h=c?d:n.join(x);t.options.log("Create sync computed: ".concat(h));var y=t.stateCtx.mutate({fn:function(j,U){if(!i.enable){t.options.log("Sync computed <".concat(h,"> is disabled"),"warn");return}t.options.log("Run sync computed for : ".concat(h));var I=U.input,g=c?j:nt.call(t,j,{input:I,computedOptions:i,computedContext:e,type:"context"}),H=c?j:nt.call(t,j,{input:I,computedOptions:i,computedContext:e,type:"scope"}),k=i.initial;try{k=s.call(g,H)}catch(P){if(typeof i.onError=="function")try{var C;(C=i.onError)===null||C===void 0||C.call(g,P)}catch(Z){}}c?r.stateCtx.setState(function(P){Object.assign(P,k)}):F(j,n,k)},desc:d,checkDeadCycle:!1});c||e.replaceValue(V(t.stateCtx.state,n));var S={id:h,mutate:y,group:i.group,async:!1,options:i,get enable(){return i.enable},set enable(w){i.enable=w},run:function(j){var U={desc:d,extraArgs:j};return c?r.stateCtx.runMutateTask(U):t.stateCtx.runMutateTask(U)}};return t.computedObjects.set(h,S),S}}var Qt=l(90393),M=l.n(Qt),Xt=l(7392),Q=l.n(Xt),qt=l(70125),X=l.n(qt),_t=l(44340),te=l(10346);function rt(e,t,r){return Object.assign({loading:!1,timeout:0,retry:0,error:null,progress:0,run:(0,v.markRaw)(et(function(n){return e.runMutateTask({desc:t,extraArgs:n})})),cancel:(0,v.markRaw)(et(function(){console.log("cancel")}))},r)}function At(e,t,r,n,a){var u=rt(e,n,a),o=V(t,r);Object.assign(o,u,a)}function ee(e,t,r){var n=Object.assign({},r),a=n.max,u=a===void 0?100:a,o=n.min,s=o===void 0?0:o,i=n.value,f=i===void 0?0:i;return e(function(p){return F(p,[].concat(E()(t),["progress"]),f)}),{value:function(c){c>u&&(c=u),c<s&&(c=s),e(function(d){return F(d,[].concat(E()(t),["progress"]),c)})},end:function(){this.value(u)}}}function q(e,t,r){e(function(n){Object.entries(r).forEach(function(a){var u=X()(a,2),o=u[0],s=u[1];F(n,[].concat(E()(t),[o]),s)})})}function ne(e,t,r,n){return lt.apply(this,arguments)}function lt(){return lt=Q()(M()().mark(function e(t,r,n,a){var u,o,s,i,f,p,c,d,h,y,S,w,j,U,I,g,H,k,C,P,Z,_,b;return M()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:u=n.input,o=n.computedOptions,s=n.computedContext,i=n.computedResultPath,f=a!==void 0,p=f?a.stateCtx.setState:n.setState,c=f?t:nt.call(this,t,{input:u,computedOptions:o,computedContext:s,type:"context"}),d=f?t:nt.call(this,t,{input:u,computedOptions:o,computedContext:s,type:"scope"}),h=s.fullKeyPath,y=o.timeout,S=y===void 0?0:y,w=o.retry,j=w===void 0?[0,0]:w,U=Array.isArray(j)?j:[Number(j),0],I=X()(U,2),g=I[0],H=I[1],C=new AbortController,P={onTimeout:function(T){return k=T},getProgressbar:function(T){return ee(p,h,T)},getSnap:function(T){return(0,v.getSnap)(T,!1)},abortSignal:C.signal,cancel:C.abort},Z=!1,q(p,i,{cancel:(0,v.markRaw)(et(function(){return C.abort()}))}),C.signal.addEventListener("abort",function(){Z=!0}),_=M()().mark(function D(){var T,J,N,$,ot,B,O,yt,gt,tt,mt,Y,Ut;return M()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(N=!1,$=!1,ot=b>0,B={},m.prev=2,O=Array.isArray(S)?S:[S,0],yt=X()(O,2),gt=yt[0],tt=gt===void 0?0:gt,mt=yt[1],Y=mt===void 0?0:mt,q(p,i,{loading:!0,error:null,retry:b>0?g-b:0,timeout:Y>1?Y:tt,progress:0}),!Z){m.next=7;break}throw new Error("Aborted");case 7:return tt>0&&(T=setTimeout(function(){$=!0,typeof k=="function"&&k(),N||(clearInterval(J),q(p,i,{loading:!1,error:"TIMEOUT",timeout:0}))},tt),Y>1&&(J=setInterval(function(){q(p,i,{timeout:Y--}),Y===0&&clearInterval(J)},tt/Y))),m.next=10,r.call(c,d,P);case 10:Ut=m.sent,$||Object.assign(B,{result:Ut,error:null,timeout:0}),m.next=20;break;case 14:if(m.prev=14,m.t0=m.catch(2),N=!0,typeof o.onError=="function")try{o.onError.call(c,m.t0)}catch(Re){}$||Object.assign(B,{error:Nt(m.t0).message,timeout:0}),g>0&&Object.assign(B,{retry:g-b});case 20:return m.prev=20,clearTimeout(T),clearInterval(J),(!N||b==g)&&Object.assign(B,{loading:!1}),!N&&!$&&Object.assign(B,{error:null}),q(p,i,B),m.finish(20);case 27:if(!N){m.next=31;break}if(!(g>0&&H>0&&b<g)){m.next=31;break}return m.next=31,(0,te.g)(H);case 31:case"end":return m.stop()}},D,null,[[2,14,20,27]])}),b=0;case 15:if(!(b<g+1)){R.next=20;break}return R.delegateYield(_(),"t0",17);case 17:b++,R.next=15;break;case 20:case"end":return R.stop()}},e,this)})),lt.apply(this,arguments)}function ft(e,t,r){var n=e.fullKeyPath,a=e.parent,u=e.value;if(!(a&&!Object.hasOwn(a,n[n.length-1]))){var o=u(),s=o.getter,i=o.options;i.async=!0;var f=t.options.onCreateComputed;if(typeof f=="function"&&typeof s=="function"){var p=f.call(t,n,s,i);i.scope||(i.scope=A.Current),i.context||(i.context=A.Root),typeof p=="function"&&(s=p)}var c=i.depends,d=c===void 0?[]:c,h=i.initial,y=i.toComputedResult,S=y===void 0?"self":y,w=i.immediate,j=i.noReentry,U=j===void 0?!1:j,I=!1,g=r!==void 0,H=g?[]:(0,_t.d)(S,{self:n,root:[],parent:n.slice(0,n.length-2),current:n.slice(0,n.length-1),Array:S,String:[].concat(E()(n.slice(0,n.length-1)),[String(S).split(x)])},{defaultValue:n}),k=Ht(d);k.length==0&&t.options.log("async computed <".concat(n.join("."),"> should specify depends"),"warn");var C=g?i.id:bt(n,i.id),P=g?C:n.join(x);t.options.log("Create async computed: ".concat(P," (depends=").concat(k.length==0?"None":L(k),")"));var Z=t.stateCtx.mutate({deps:function(W){return Ft(k,W,n)},fn:function(W,R){if(R.isFirstCall)if(g)r.stateCtx.setState(function(T){Object.assign(T,rt(r.stateCtx,C,{result:h}))});else if(S=="self")F(W,n,rt(t.stateCtx,C,{result:h}));else{At(t.stateCtx,W,H,C,{result:h});var D=V(W,n.slice(0,n.length-1));delete D[n[n.length-1]]}},task:function(){var b=Q()(M()().mark(function R(D){var T,J,N,$,ot;return M()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(T=D.draft,J=D.setState,N=D.input,$=D.extraArgs,!(!i.enable&&($==null?void 0:$.enable)!==!0)){O.next=4;break}return t.options.log("Async computed <".concat(P,"> is disabled"),"warn"),O.abrupt("return");case 4:if(t.options.log("Run async computed for : ".concat(P)),ot=Object.assign({},i,$),!(U&&I&&t.options.debug)){O.next=9;break}return t.options.log("Reentry async computed: ".concat(P),"warn"),O.abrupt("return");case 9:return I=!0,O.prev=10,O.next=13,ne.call(t,T,s,{input:N,computedResultPath:H,computedOptions:ot,computedContext:e,setState:J},r);case 13:return O.abrupt("return",O.sent);case 14:return O.prev=14,I=!1,O.finish(14);case 17:case"end":return O.stop()}},R,null,[[10,,14,17]])}));function W(R){return b.apply(this,arguments)}return W}(),immediate:w,desc:C,checkDeadCycle:!1});g||e.replaceValue(V(t.stateCtx.state,n));var _={id:P,mutate:Z,group:i.group,async:!0,options:i,get enable(){return i.enable},set enable(b){i.enable=b},run:function(W){var R={desc:C,extraArgs:W};return g?r.stateCtx.runMutateTask(R):t.stateCtx.runMutateTask(R)}};return t.computedObjects.set(P,_),_}}var Et=l(20649);function pt(e,t,r){var n=e.value,a;if(n.__COMPUTED__=="async"?a=ft(e,t,r):n.__COMPUTED__=="sync"?a=ct(e,t,r):(0,Et.$)(n)?(e.value=function(){return{fn:n,options:{depends:[],initial:void 0,immediate:!0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},a=ft(e,t,r)):(e.value=function(){return{fn:n,options:{initial:void 0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},a=ct(e,t,r)),a&&typeof t.options.onCreateComputedObject=="function")try{t.options.onCreateComputedObject(e.fullKeyPath,a)}catch(u){t.options.log(u.stack,"error")}}var re=l(71698),dt=l.n(re),ae=l(77937),at=l.n(ae),ue=l(41176),ut=l.n(ue),ie=l(44114),it=l.n(ie),oe=l(19365),se=l.n(oe),ce=l(72904),le=l.n(ce),fe=l(65523),wt=l.n(fe),pe=l(7122),Rt=l.n(pe),de=l(19108),Pt=l.n(de),ve=l(79862),z=l.n(ve);function Tt(e,t,r){if(typeof e!="function")throw new Error("computed getter must be a function");var n=[],a={async:!1,enable:!0,timeout:0,depends:[],toComputedResult:A.Self,immediate:!0};if(arguments.length==1)n=[];else if(arguments.length==2)if(Array.isArray(arguments[1]))n=arguments[1];else if(Lt()(arguments[1])=="object")Object.assign(a,arguments[1]);else throw new Error("invalid arguments");else arguments.length>=3&&(n=arguments[1],Object.assign(a,arguments[2]));var u=a.async===!0||(0,Et.$)(e)||arguments.length>=2&&Array.isArray(t);a.async=u,a.depends=n;var o=function(){return{getter:e,options:a}};return o.__COMPUTED__=u?"async":"sync",o}function he(e){return function(t,r){var n=Object.assign({id:"s"+Math.random().toString(16).substring(2),scope:e.stateCtx.state,context:e.stateCtx.state},r);if(!Array.isArray(n.depends)||n.depends.length==0)throw new Error("options.depends must be an array and not empty");var a=(0,v.sharex)({}),u={fullKeyPath:[],parent:null,value:Tt(t,n.depends,r)};return pt(u,e),a}}var Mt=function(e){wt()(r,e);var t=Rt()(r);function r(n){var a;return at()(this,r),a=t.call(this),z()(it()(a),"_createComputed",void 0),a.store=n,a}return ut()(r,[{key:"runGroup",value:function(){var n=Q()(M()().mark(function u(o){return M()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(E()(this.values()).filter(function(f){return f.group==o}).map(function(f){return f.async?f.mutate.runTask():f.mutate.run()})));case 1:case"end":return i.stop()}},u,this)}));function a(u){return n.apply(this,arguments)}return a}()},{key:"enableGroup",value:function(){var n=Q()(M()().mark(function u(o){var s,i,f;return M()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:s=dt()(this.values());try{for(s.s();!(i=s.n()).done;)f=i.value,f.options.enable=o}catch(d){s.e(d)}finally{s.f()}case 2:case"end":return c.stop()}},u,this)}));function a(u){return n.apply(this,arguments)}return a}()},{key:"delete",value:function(a){var u;return(u=this.get(a))===null||u===void 0||u.mutate.cancel(),se()(le()(r.prototype),"delete",this).call(this,a)}},{key:"new",get:function(){return this._createComputed||(this._createComputed=he(this.store)),this._createComputed}}]),r}(Pt()(Map));function kt(e){return typeof e=="function"?e:typeof e=="string"?function(t){return L(t)==L(e.split(x))}:Array.isArray(e)?function(t){return e.map(function(r){return typeof r=="string"?r.split(x):Array.isArray(r)?r:[String(r)]}).some(function(r){return L(t)==L(r)})}:function(){return!1}}function ye(e,t,r){var n=Object.assign({depends:kt(t),enable:!0},r),a=function(){return{listener:e,options:n}};return a.__COMPUTED__="watch",a}function vt(e){return function(t,r){var n=(0,v.watch)(function(u){var o=u.triggerReasons,s=o.map(function(i){return i.keyPath});t(s)},function(){return r==null?void 0:r.map(function(u){return K(e.stateCtx.state,u)})}),a=n.unwatch;return a}}var ge=l(70079);function ht(e,t){t.options.log("install watch for <".concat(e.fullKeyPath.length==0?"Dynamic":e.fullKeyPath.join(x),">"));var r=e.value();r.options.selfPath=e.fullKeyPath;var n=t.watchObjects.add(r),a=r.options.context;return a?a.setState(function(u){u.value=r.options.initial}):(e.replaceValue(r.options.initial),t.stateCtx.setState(function(u){F(u,e.fullKeyPath,r.options.initial)}),(0,v.flush)(t.stateCtx.state)),n}function Dt(e){return function(t,r,n){(0,ge.useEffect)(function(){var a={fullKeyPath:["value"],keyPath:[],parent:void 0,value:function(){var s={listener:t,options:Object.assign({depends:kt(r),context:(0,v.sharex)({value:0}),selfPath:["value"],initial:0,enable:!0,scope:A.Depends},n)};return s}},u=ht(a,e);return function(){e.watchObjects.delete(u.id)}},[r])}}function $t(){return Math.random().toString(36).slice(2)}var It=function(){function e(t,r){if(at()(this,e),z()(this,"_cache",void 0),z()(this,"_listener",void 0),z()(this,"_options",void 0),this.store=t,this._options=Object.assign({enable:!0,selfPath:[],group:void 0,context:void 0,initial:void 0},r.options),typeof this._options.depends!="function")throw new Error("watch options.depends must be a function");if(!this._options.id){var n=this._options.selfPath;this._options.id=this._options.id||this._options.context?$t():L(n)}this._listener=r.listener}return ut()(e,[{key:"id",get:function(){return this._options.id}},{key:"options",get:function(){return this._options}},{key:"selfPath",get:function(){return this._options.selfPath}},{key:"depends",get:function(){return this._options.depends}},{key:"enable",get:function(){return this._options.enable},set:function(r){this._options.enable=r}},{key:"cache",get:function(){return this._cache||(this._cache={}),this._cache}},{key:"value",get:function(){var r=this._options.context?this._options.context:this.store.state;return V((0,v.getSnap)(r),this.selfPath)}},{key:"getName",value:function(){return this._options.context?this.id:this.selfPath.join(x)}},{key:"reset",value:function(){this._cache={}}},{key:"run",value:function(r,n){var a=this;if(!this.enable){this.store.options.log("WatchObject <".concat(this.getName(),"> is disabled"));return}try{var u=this._listener.call(this,n,r,this);u!==void 0&&(this._options.context?this._options.context.setState(function(o){o.value=u}):this.store.setState(function(o){F(o,a.selfPath,u)}))}catch(o){}}}]),e}(),Wt=function(e){wt()(r,e);var t=Rt()(r);function r(n){var a;return at()(this,r),a=t.call(this),z()(it()(a),"_off",void 0),z()(it()(a),"_enable",!0),a.store=n,n.on("created",a.onStateCreated.bind(it()(a))),a}return ut()(r,[{key:"onStateCreated",value:function(){this.createWacher()}},{key:"enable",get:function(){return this._enable},set:function(a){this._enable=a}},{key:"createWacher",value:function(){var a=this,u=(0,v.watch)(function(s){var i=s.triggerReasons;if(a._enable){var f=i.map(function(p){return p.keyPath});f.forEach(function(p){var c=V(a.store.state,p),d=dt()(a.values()),h;try{for(d.s();!(h=d.n()).done;){var y=h.value;y.depends(p,c)&&y.run(p,c)}}catch(S){d.e(S)}finally{d.f()}})}},function(){return[a.store.state]}),o=u.unwatch;this._off=o}},{key:"reset",value:function(){this._off&&this._off(),this.createWacher()}},{key:"add",value:function(a){var u=new It(this.store,a);return this.set(u.id,u),u}},{key:"enableGroup",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=dt()(this.values()),s;try{for(o.s();!(s=o.n()).done;){var i=s.value;i.options.group==a&&(i.options.enable=u)}}catch(f){o.e(f)}finally{o.f()}}}]),r}(Pt()(Map));function me(e,t){var r=e.fullKeyPath,n=e.value,a=r.join(".");typeof n=="function"&&!t._replacedKeys[a]&&!Ot(n)&&(t._replacedKeys[a]=!0,n.__COMPUTED__=="watch"?ht(e,t):pt(e,t))}function Vt(e){return function(t,r){var n=e.stateCtx.useState;if(t==null)return n();var a=n(),u=X()(a,2),o=u[0],s=u[1],i=t(o),f=s;return typeof r=="function"&&(f=function(c){s(function(d){r.call(d,d,c)})}),[i,f]}}function Ce(e){return function(t){e.stateCtx.setState(function(r){t(r)})}}var be=l(24222),Oe=function(){function e(t){at()(this,e),z()(this,"_stateCtx",void 0),this._stateCtx=(0,v.sharex)(t)}return ut()(e,[{key:"state",get:function(){return this._stateCtx.state}},{key:"useState",value:function(r,n){var a=this._stateCtx.useState(),u=X()(a,2),o=u[0],s=u[1],i=typeof r=="function"?r(o):o,f=typeof n=="function"?function(p){s(function(c){n.call(c,c,p)})}:s;return[i,f]}},{key:"setState",value:function(r){this._stateCtx.setState(r)}},{key:"createComputed",value:function(r){var n=r.initial,a=r.onComputed,u=r.depends,o=r.options;return this._stateCtx.mutate({deps:function(i){return u},fn:function(i,f){f.isFirstCall&&n(i,f)},task:function(){var s=Q()(M()().mark(function f(p){var c,d,h,y;return M()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return c=p.draft,d=p.setState,h=p.input,y=p.extraArgs,w.abrupt("return",a({draft:c,setState:d,input:h,options:Object.assign({},y)}));case 2:case"end":return w.stop()}},f)}));function i(f){return s.apply(this,arguments)}return i}(),immediate:o.immediate,desc:o.id,checkDeadCycle:!1}),o.id}},{key:"runComputed",value:function(r,n){var a={desc:r,extraArgs:n};this._stateCtx.runMutateTask(a)}},{key:"onRead",value:function(r){throw new Error("Method not implemented.")}}]),e}();function xe(e,t){var r=Object.assign({id:$t(),debug:!0,computedThis:function(){return A.Root},computedScope:function(){return A.Current},singleton:!0,reactiveable:!0},t);r.log=function(){r.debug&&Jt.apply(void 0,arguments)};var n=(0,be.Z)(),a={options:r,on:n.on,off:n.off,emit:n.emit,_replacedKeys:{}};return a.computedObjects=new Mt(a),a.watchObjects=new Wt(a),a.reactiveable=new Oe(e),a.stateCtx=(0,v.sharex)(e,{stopArrDep:!1,moduleName:r.id,onRead:function(o){me(o,a)}}),a.state=a.stateCtx.reactive,a.emit("created"),a.useState=Vt(a),a.setState=Ce(a),a.enableComputed=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return a.stateCtx.setEnableMutate(u)},a.sync=a.stateCtx.sync,a.watch=vt(a),a.useWatch=Dt(a),a.watch=vt(a),a}var Se=l(39114),Kt=l.n(Se);function je(e){var t=(0,v.sharex)(e);return Kt()(Kt()({},t),{},{useState:Vt(t)})}},43095:function(Ct){function G(l){var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}G.keys=function(){return[]},G.resolve=G,G.id=43095,Ct.exports=G}}]);
