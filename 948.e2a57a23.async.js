(self.webpackChunkspeedform_docs=self.webpackChunkspeedform_docs||[]).push([[948],{70300:function(xt,G,l){"use strict";l.r(G),l.d(G,{$:function(){return h.$},ComputedObjects:function(){return kt},ComputedScopeRef:function(){return A},OBJECT_PATH_DELIMITER:function(){return j},SKIP_COMPUTED:function(){return st},WatchObject:function(){return It},WatchObjects:function(){return Wt},computed:function(){return Mt},createAsyncComputedMutate:function(){return ft},createAsyncComputedObject:function(){return it},createComputedMutate:function(){return ct},createObject:function(){return h.share},createStore:function(){return Se},createUseWatch:function(){return $t},createWatch:function(){return yt},getSnap:function(){return h.getSnap},getVal:function(){return K},getValueByPath:function(){return U},installComputed:function(){return pt},installWatch:function(){return gt},isIncludePath:function(){return Jt},isSkipComputed:function(){return jt},markRaw:function(){return h.markRaw},reactive:function(){return Ae},setAsyncComputedObject:function(){return Rt},setVal:function(){return F},skipComputed:function(){return at},watch:function(){return ge}});var h=l(67687),A=function(e){return e.Root="root",e.Current="current",e.Parent="parent",e.Depends="depends",e.Self="self",e}({});function L(e){return(e||[]).map(function(t){return Array.isArray(t)?t.join("."):t}).join("_")}function St(e,t){var a="";return typeof t=="function"?a=t(e):typeof t=="string"?a=t:a=L(e),a}function Gt(e){return e instanceof Error?e:new Error(e)}var j="/",st=Symbol("SKIP_COMPUTED");function jt(e){return e[st]===!0}var Ft=l(79664),w=l.n(Ft);function At(e,t){if(!Array.isArray(e))throw new Error("path must be an array");return t==="self"?e:t==="root"?[]:t==="parent"?e.slice(0,-2):t==="current"?e.slice(0,-1):typeof t=="string"?t.startsWith("./")?[].concat(w()(e.slice(0,-1)),w()(t.slice(2).split(j))):t.startsWith("../")?At(e.slice(0,-1),t.slice(3)):(t.includes(".")&&(console.warn('[@speedform/reactive] The dependency path uses "/" as the separator, and will automatically convert'),t=t.replaceAll(".","/")),[].concat(w()(e.slice(0,-1)),w()(t.split(j)))):Array.isArray(t)?t:e}function wt(e,t){var a=e.get(t);if(a!==void 0)return a;var n=e.get(Number(t)||t);if(n!==void 0)return n}function Et(e){return toString.call(e)==="[object Map]"}function K(e,t){if(t.length===0)return e;var a,n=e;return t.forEach(function(r){a=Et(n)?wt(n,r):n[r],n=a}),a}function Ht(e,t,a){return e.map(function(n){return K(t,At(a,n))})}function Bt(e){return(e||[]).map(function(t){return Array.isArray(t)?t:typeof t=="string"?t.startsWith("./")||t.startsWith("../")?t:t.includes(j)?t.split(j):t.split("."):[]})}var Lt=l(26851),zt=l.n(Lt);function we(e){return _typeof(e)=="object"&&e.hasOwnProperty("__COMPUTED__")&&["async","sync"].includes(e.__COMPUTED__)&&e.hasOwnProperty("fn")&&typeof e.fn=="function"&&e.hasOwnProperty("options")&&_typeof(e.options)=="object"}function Ee(e){return _typeof(e)=="object"&&["result","loading","timeout","retry","run"].every(function(t){return e.hasOwnProperty(t)})}function Jt(e,t){return e.length>t.length?!1:e.every(function(a,n){return a===t[n]})}function Yt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log",a=typeof e=="function"?e():e instanceof Error?e.stack:e;try{var n;(n=console)[t].apply(n,["[@speedform/reactive] "].concat(w()(Array.isArray(a)?a:[a])))}catch(r){}}function F(e,t,a){var n=e,r=t.length-1;t.forEach(function(u,o){var c=Et(n);if(o===r){c?n.set(u,a):n[u]=a;return}var i=c?wt(n,u):n[u];n=i})}function at(e){return e[st]=!0,e}function U(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:j,n=[];try{return typeof t=="function"&&(t=t.call(e,e)),n=Array.isArray(t)?t:typeof t=="string"?t.split(a):[],n.length>0?K(e,n):e}catch(r){return e}}function Zt(e,t,a){var n=t==null?a:t;if(typeof n=="function")try{n=n.call(e,e)}catch(r){}return n==null?a==null?A.Root:a:n}function Qt(e,t){var a=t.input,n=t.type,r=t.valuePath,u=t.funcOptions,o=t.storeOptions,c=t.computedType,i=e;if(typeof o.onComputedContext=="function"){var f=o.onComputedContext.call(e,e,{computedType:c,contextType:n,valuePath:r});f!==void 0&&(i=f)}var p=r.length>=1?r.slice(0,r.length-1):[],s=Zt(e,n=="context"?u.context:u.scope,n=="context"?o.computedThis&&o.computedThis(c):o.computedScope&&o.computedScope(c));try{if(s===A.Current)return U(e,p);if(s===A.Parent)return U(e,r.slice(0,r.length-2));if(s===A.Root)return i;if(s===A.Depends)return Array.isArray(a)?a.map(function(y){return typeof y=="function"?y():y}):[];if(typeof s=="string")return U(e,[].concat(w()(p),w()(s.split(j))));if(Array.isArray(s))if(s.length>0&&s[0].startsWith("@")){var d=U(e,[].concat(w()(s[0].substring(1).split(j)),w()(s.slice(1))));return U(e,d)}else return U(e,s);else if(typeof s=="number"){var v=s>r.length-2?r.length-s-1:0;return U(e,r.slice(0,v))}else return e}catch(y){return e}}function ut(e,t){var a=this.options,n=t.input,r=t.type,u=t.computedContext,o=t.computedOptions;return Qt(e,{input:n,type:r,valuePath:u.fullKeyPath,funcOptions:o,storeOptions:a,computedType:"Computed"})}function ct(e,t,a){var n=e.fullKeyPath,r=e.parent,u=e.value,o=u(),c=o.fn,i=o.options;if(!(r&&!Object.hasOwn(r,n[n.length-1]))){var f=t.options.onCreateComputed;if(typeof f=="function"&&typeof c=="function"){var p=f.call(t,n,c,i);i.scope||(i.scope=A.Current),i.context||(i.context=A.Root),typeof p=="function"&&(c=p)}var s=a!==void 0,d=s?i.id:St(n,i.id),v=s?d:n.join(j);t.options.log("Create sync computed: ".concat(v));var y=t.stateCtx.mutate({fn:function(b,E){if(!i.enable){t.options.log("Sync computed <".concat(v,"> is disabled"),"warn");return}t.options.log("Run sync computed for : ".concat(v));var W=E.input,g=s?b:ut.call(t,b,{input:W,computedOptions:i,computedContext:e,type:"context"}),H=s?b:ut.call(t,b,{input:W,computedOptions:i,computedContext:e,type:"scope"}),D=i.initial;try{D=c.call(g,H)}catch(T){if(typeof i.onError=="function")try{var O;(O=i.onError)===null||O===void 0||O.call(g,T)}catch(Z){}}s?a.stateCtx.setState(function(T){Object.assign(T,D)}):F(b,n,D)},desc:d,checkDeadCycle:!1});s||e.replaceValue(K(t.stateCtx.state,n));var C={id:v,mutate:y,group:i.group,async:!1,options:i,get enable(){return i.enable},set enable(k){i.enable=k},run:function(b){var E={desc:d,extraArgs:b};return s?a.stateCtx.runMutateTask(E):t.stateCtx.runMutateTask(E)}};return t.computedObjects.set(v,C),C}}var Xt=l(90393),M=l.n(Xt),qt=l(7392),Q=l.n(qt),_t=l(70125),X=l.n(_t),te=l(44340),ee=l(10346);function it(e,t,a){return Object.assign({loading:!1,timeout:0,retry:0,error:null,progress:0,run:(0,h.markRaw)(at(function(n){return e.runMutateTask({desc:t,extraArgs:n})})),cancel:(0,h.markRaw)(at(function(){console.log("cancel")}))},a)}function Rt(e,t,a,n,r){var u=it(e,n,r),o=K(t,a);Object.assign(o,u,r)}function ne(e,t,a){var n=Object.assign({},a),r=n.max,u=r===void 0?100:r,o=n.min,c=o===void 0?0:o,i=n.value,f=i===void 0?0:i;return e(function(p){return F(p,[].concat(w()(t),["progress"]),f)}),{value:function(s){s>u&&(s=u),s<c&&(s=c),e(function(d){return F(d,[].concat(w()(t),["progress"]),s)})},end:function(){this.value(u)}}}function q(e,t,a){e(function(n){Object.entries(a).forEach(function(r){var u=X()(r,2),o=u[0],c=u[1];F(n,[].concat(w()(t),[o]),c)})})}function re(e,t,a,n){return lt.apply(this,arguments)}function lt(){return lt=Q()(M()().mark(function e(t,a,n,r){var u,o,c,i,f,p,s,d,v,y,C,k,b,E,W,g,H,D,O,T,Z,nt,x;return M()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:u=n.input,o=n.computedOptions,c=n.computedContext,i=n.computedResultPath,f=r!==void 0,p=f?r.stateCtx.setState:n.setState,s=f?t:ut.call(this,t,{input:u,computedOptions:o,computedContext:c,type:"context"}),d=f?t:ut.call(this,t,{input:u,computedOptions:o,computedContext:c,type:"scope"}),v=c.fullKeyPath,y=o.timeout,C=y===void 0?0:y,k=o.retry,b=k===void 0?[0,0]:k,E=Array.isArray(b)?b:[Number(b),0],W=X()(E,2),g=W[0],H=W[1],O=new AbortController,T={onTimeout:function(P){return D=P},getProgressbar:function(P){return ne(p,v,P)},getSnap:function(P){return(0,h.getSnap)(P,!1)},abortSignal:O.signal,cancel:O.abort},Z=!1,q(p,i,{cancel:(0,h.markRaw)(at(function(){return O.abort()}))}),O.signal.addEventListener("abort",function(){Z=!0}),nt=M()().mark(function $(){var P,J,N,I,ot,B,S,Ct,bt,rt,Ot,Y,Nt;return M()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(N=!1,I=!1,ot=x>0,B={},m.prev=2,S=Array.isArray(C)?C:[C,0],Ct=X()(S,2),bt=Ct[0],rt=bt===void 0?0:bt,Ot=Ct[1],Y=Ot===void 0?0:Ot,q(p,i,{loading:!0,error:null,retry:x>0?g-x:0,timeout:Y>1?Y:rt,progress:0}),!Z){m.next=7;break}throw new Error("Aborted");case 7:return rt>0&&(P=setTimeout(function(){I=!0,typeof D=="function"&&D(),N||(clearInterval(J),q(p,i,{loading:!1,error:"TIMEOUT",timeout:0}))},rt),Y>1&&(J=setInterval(function(){q(p,i,{timeout:Y--}),Y===0&&clearInterval(J)},rt/Y))),m.next=10,a.call(s,d,T);case 10:Nt=m.sent,I||Object.assign(B,{result:Nt,error:null,timeout:0}),m.next=20;break;case 14:if(m.prev=14,m.t0=m.catch(2),N=!0,typeof o.onError=="function")try{o.onError.call(s,m.t0)}catch(Te){}I||Object.assign(B,{error:Gt(m.t0).message,timeout:0}),g>0&&Object.assign(B,{retry:g-x});case 20:return m.prev=20,clearTimeout(P),clearInterval(J),(!N||x==g)&&Object.assign(B,{loading:!1}),!N&&!I&&Object.assign(B,{error:null}),q(p,i,B),m.finish(20);case 27:if(!N){m.next=31;break}if(!(g>0&&H>0&&x<g)){m.next=31;break}return m.next=31,(0,ee.g)(H);case 31:case"end":return m.stop()}},$,null,[[2,14,20,27]])}),x=0;case 15:if(!(x<g+1)){R.next=20;break}return R.delegateYield(nt(),"t0",17);case 17:x++,R.next=15;break;case 20:case"end":return R.stop()}},e,this)})),lt.apply(this,arguments)}function ft(e,t,a){var n=e.fullKeyPath,r=e.parent,u=e.value;if(!(r&&!Object.hasOwn(r,n[n.length-1]))){var o=u(),c=o.getter,i=o.options;i.async=!0;var f=t.options.onCreateComputed;if(typeof f=="function"&&typeof c=="function"){var p=f.call(t,n,c,i);i.scope||(i.scope=A.Current),i.context||(i.context=A.Root),typeof p=="function"&&(c=p)}var s=i.depends,d=s===void 0?[]:s,v=i.initial,y=i.toComputedResult,C=y===void 0?"self":y,k=i.immediate,b=i.noReentry,E=b===void 0?!1:b,W=!1,g=a!==void 0,H=g?[]:(0,te.d)(C,{self:n,root:[],parent:n.slice(0,n.length-2),current:n.slice(0,n.length-1),Array:C,String:[].concat(w()(n.slice(0,n.length-1)),[String(C).split(j)])},{defaultValue:n}),D=Bt(d);D.length==0&&t.options.log("async computed <".concat(n.join("."),"> should specify depends"),"warn");var O=g?i.id:St(n,i.id),T=g?O:n.join(j);t.options.log("Create async computed: ".concat(T," (depends=").concat(D.length==0?"None":L(D),")"));var Z=t.stateCtx.mutate({deps:function(V){return Ht(D,V,n)},fn:function(V,R){if(R.isFirstCall)if(g)a.stateCtx.setState(function(P){Object.assign(P,it(a.stateCtx,O,{result:v}))});else if(C=="self")F(V,n,it(t.stateCtx,O,{result:v}));else{Rt(t.stateCtx,V,H,O,{result:v});var $=K(V,n.slice(0,n.length-1));delete $[n[n.length-1]]}},task:function(){var x=Q()(M()().mark(function R($){var P,J,N,I,ot;return M()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(P=$.draft,J=$.setState,N=$.input,I=$.extraArgs,!(!i.enable&&(I==null?void 0:I.enable)!==!0)){S.next=4;break}return t.options.log("Async computed <".concat(T,"> is disabled"),"warn"),S.abrupt("return");case 4:if(t.options.log("Run async computed for : ".concat(T)),ot=Object.assign({},i,I),!(E&&W&&t.options.debug)){S.next=9;break}return t.options.log("Reentry async computed: ".concat(T),"warn"),S.abrupt("return");case 9:return W=!0,S.prev=10,S.next=13,re.call(t,P,c,{input:N,computedResultPath:H,computedOptions:ot,computedContext:e,setState:J},a);case 13:return S.abrupt("return",S.sent);case 14:return S.prev=14,W=!1,S.finish(14);case 17:case"end":return S.stop()}},R,null,[[10,,14,17]])}));function V(R){return x.apply(this,arguments)}return V}(),immediate:k,desc:O,checkDeadCycle:!1});g||e.replaceValue(K(t.stateCtx.state,n));var nt={id:T,mutate:Z,group:i.group,async:!0,options:i,get enable(){return i.enable},set enable(x){i.enable=x},run:function(V){var R={desc:O,extraArgs:V};return g?a.stateCtx.runMutateTask(R):t.stateCtx.runMutateTask(R)}};return t.computedObjects.set(T,nt),nt}}var Tt=l(20649);function pt(e,t,a){var n=e.value,r;if(n.__COMPUTED__=="async"?r=ft(e,t,a):n.__COMPUTED__=="sync"?r=ct(e,t,a):(0,Tt.$)(n)?(e.value=function(){return{fn:n,options:{depends:[],initial:void 0,immediate:!0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},r=ft(e,t,a)):(e.value=function(){return{fn:n,options:{initial:void 0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},r=ct(e,t,a)),r&&typeof t.options.onCreateComputedObject=="function")try{t.options.onCreateComputedObject(e.fullKeyPath,r)}catch(u){t.options.log(u.stack,"error")}}var ae=l(71698),dt=l.n(ae),ue=l(77937),_=l.n(ue),ie=l(41176),tt=l.n(ie),oe=l(44114),et=l.n(oe),se=l(19365),ce=l.n(se),le=l(72904),fe=l.n(le),pe=l(65523),vt=l.n(pe),de=l(7122),ht=l.n(de),ve=l(19108),Pt=l.n(ve),he=l(79862),z=l.n(he);function Mt(e,t,a){if(typeof e!="function")throw new Error("computed getter must be a function");var n=[],r={async:!1,enable:!0,timeout:0,depends:[],toComputedResult:A.Self,immediate:!0};if(arguments.length==1)n=[];else if(arguments.length==2)if(Array.isArray(arguments[1]))n=arguments[1];else if(zt()(arguments[1])=="object")Object.assign(r,arguments[1]);else throw new Error("invalid arguments");else arguments.length>=3&&(n=arguments[1],Object.assign(r,arguments[2]));var u=r.async===!0||(0,Tt.$)(e)||arguments.length>=2&&Array.isArray(t);r.async=u,r.depends=n;var o=function(){return{getter:e,options:r}};return o.__COMPUTED__=u?"async":"sync",o}function ye(e){return function(t,a){var n=Object.assign({id:"s"+Math.random().toString(16).substring(2),scope:e.stateCtx.state,context:e.stateCtx.state},a);if(!Array.isArray(n.depends)||n.depends.length==0)throw new Error("options.depends must be an array and not empty");var r=(0,h.sharex)({}),u={fullKeyPath:[],parent:null,value:Mt(t,n.depends,a)};return pt(u,e),r}}var kt=function(e){vt()(a,e);var t=ht()(a);function a(n){var r;return _()(this,a),r=t.call(this),z()(et()(r),"_createComputed",void 0),r.store=n,r}return tt()(a,[{key:"runGroup",value:function(){var n=Q()(M()().mark(function u(o){return M()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(w()(this.values()).filter(function(f){return f.group==o}).map(function(f){return f.async?f.mutate.runTask():f.mutate.run()})));case 1:case"end":return i.stop()}},u,this)}));function r(u){return n.apply(this,arguments)}return r}()},{key:"enableGroup",value:function(){var n=Q()(M()().mark(function u(o){var c,i,f;return M()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:c=dt()(this.values());try{for(c.s();!(i=c.n()).done;)f=i.value,f.options.enable=o}catch(d){c.e(d)}finally{c.f()}case 2:case"end":return s.stop()}},u,this)}));function r(u){return n.apply(this,arguments)}return r}()},{key:"delete",value:function(r){var u;return(u=this.get(r))===null||u===void 0||u.mutate.cancel(),ce()(fe()(a.prototype),"delete",this).call(this,r)}},{key:"new",get:function(){return this._createComputed||(this._createComputed=ye(this.store)),this._createComputed}}]),a}(Pt()(Map));function Dt(e){return typeof e=="function"?e:typeof e=="string"?function(t){return L(t)==L(e.split(j))}:Array.isArray(e)?function(t){return e.map(function(a){return typeof a=="string"?a.split(j):Array.isArray(a)?a:[String(a)]}).some(function(a){return L(t)==L(a)})}:function(){return!1}}function ge(e,t,a){var n=Object.assign({depends:Dt(t),enable:!0},a),r=function(){return{listener:e,options:n}};return r.__COMPUTED__="watch",r}function yt(e){return function(t,a){var n=(0,h.watch)(function(u){var o=u.triggerReasons,c=o.map(function(i){return i.keyPath});t(c)},function(){return a==null?void 0:a.map(function(u){return U(e.stateCtx.state,u)})}),r=n.unwatch;return r}}var me=l(70079);function gt(e,t){t.options.log("install watch for <".concat(e.fullKeyPath.length==0?"Dynamic":e.fullKeyPath.join(j),">"));var a=e.value();a.options.selfPath=e.fullKeyPath;var n=t.watchObjects.add(a),r=a.options.context;return r?r.setState(function(u){u.value=a.options.initial}):(e.replaceValue(a.options.initial),t.stateCtx.setState(function(u){F(u,e.fullKeyPath,a.options.initial)}),(0,h.flush)(t.stateCtx.state)),n}function $t(e){return function(t,a,n){(0,me.useEffect)(function(){var r={fullKeyPath:["value"],keyPath:[],parent:void 0,value:function(){var c={listener:t,options:Object.assign({depends:Dt(a),context:(0,h.sharex)({value:0}),selfPath:["value"],initial:0,enable:!0,scope:A.Depends},n)};return c}},u=gt(r,e);return function(){e.watchObjects.delete(u.id)}},[a])}}function mt(){return Math.random().toString(36).slice(2)}var It=function(){function e(t,a){if(_()(this,e),z()(this,"_cache",void 0),z()(this,"_listener",void 0),z()(this,"_options",void 0),this.store=t,this._options=Object.assign({enable:!0,selfPath:[],group:void 0,context:void 0,initial:void 0},a.options),typeof this._options.depends!="function")throw new Error("watch options.depends must be a function");if(!this._options.id){var n=this._options.selfPath;this._options.id=this._options.id||this._options.context?mt():L(n)}this._listener=a.listener}return tt()(e,[{key:"id",get:function(){return this._options.id}},{key:"options",get:function(){return this._options}},{key:"selfPath",get:function(){return this._options.selfPath}},{key:"depends",get:function(){return this._options.depends}},{key:"enable",get:function(){return this._options.enable},set:function(a){this._options.enable=a}},{key:"cache",get:function(){return this._cache||(this._cache={}),this._cache}},{key:"value",get:function(){var a=this._options.context?this._options.context:this.store.state;return K((0,h.getSnap)(a),this.selfPath)}},{key:"getName",value:function(){return this._options.context?this.id:this.selfPath.join(j)}},{key:"reset",value:function(){this._cache={}}},{key:"run",value:function(a,n){var r=this;if(!this.enable){this.store.options.log("WatchObject <".concat(this.getName(),"> is disabled"));return}try{var u=this._listener.call(this,n,a,this);u!==void 0&&(this._options.context?this._options.context.setState(function(o){o.value=u}):this.store.setState(function(o){F(o,r.selfPath,u)}))}catch(o){}}}]),e}(),Wt=function(e){vt()(a,e);var t=ht()(a);function a(n){var r;return _()(this,a),r=t.call(this),z()(et()(r),"_off",void 0),z()(et()(r),"_enable",!0),r.store=n,n.on("created",r.onStateCreated.bind(et()(r))),r}return tt()(a,[{key:"onStateCreated",value:function(){this.createWacher()}},{key:"enable",get:function(){return this._enable},set:function(r){this._enable=r}},{key:"createWacher",value:function(){var r=this,u=(0,h.watch)(function(c){var i=c.triggerReasons;if(r._enable){var f=i.map(function(p){return p.keyPath});f.forEach(function(p){var s=K(r.store.state,p),d=dt()(r.values()),v;try{for(d.s();!(v=d.n()).done;){var y=v.value;y.depends(p,s)&&y.run(p,s)}}catch(C){d.e(C)}finally{d.f()}})}},function(){return[r.store.state]}),o=u.unwatch;this._off=o}},{key:"reset",value:function(){this._off&&this._off(),this.createWacher()}},{key:"add",value:function(r){var u=new It(this.store,r);return this.set(u.id,u),u}},{key:"enableGroup",value:function(r){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=dt()(this.values()),c;try{for(o.s();!(c=o.n()).done;){var i=c.value;i.options.group==r&&(i.options.enable=u)}}catch(f){o.e(f)}finally{o.f()}}}]),a}(Pt()(Map));function Vt(e,t){var a=e.path,n=e.value,r=a.join(".");typeof n=="function"&&!t._replacedKeys[r]&&!jt(n)&&(t._replacedKeys[r]=!0,n.__COMPUTED__=="watch"?gt(e,t):pt(e,t))}function Kt(e){return function(t,a){var n=e.stateCtx.useState;if(t==null)return n();var r=n(),u=X()(r,2),o=u[0],c=u[1],i=t(o),f=c;return typeof a=="function"&&(f=function(s){c(function(d){a.call(d,d,s)})}),[i,f]}}function Ce(e){return function(t){e.stateCtx.setState(function(a){t(a)})}}var be=l(24222),Oe=function(){function e(t,a){_()(this,e)}return tt()(e,[{key:"state",get:function(){throw new Error("Method not implemented.")}},{key:"useState",value:function(a,n){throw new Error("Method not implemented.")}},{key:"setState",value:function(a){throw new Error("Method not implemented.")}},{key:"createComputed",value:function(a){throw new Error("Method not implemented.")}},{key:"runComputed",value:function(a,n){throw new Error("Method not implemented.")}}]),e}(),xe=function(e){vt()(a,e);var t=ht()(a);function a(n,r){var u,o;return _()(this,a),o=t.call(this,n,r),z()(et()(o),"_stateCtx",void 0),o._stateCtx=(0,h.sharex)(n,{stopArrDep:!1,moduleName:(u=r.id)!==null&&u!==void 0?u:mt(),onRead:function(i){r.onRead(i)}}),o}return tt()(a,[{key:"state",get:function(){return this._stateCtx.state}},{key:"useState",value:function(r,u){var o=this._stateCtx.useState(),c=X()(o,2),i=c[0],f=c[1],p=typeof r=="function"?r(i):i,s=typeof u=="function"?function(d){f(function(v){u.call(v,v,d)})}:f;return[p,s]}},{key:"setState",value:function(r){this._stateCtx.setState(r)}},{key:"createComputed",value:function(r){var u=r.initial,o=r.onComputed,c=r.depends,i=r.options;return this._stateCtx.mutate({deps:function(p){return c},fn:function(p,s){s.isFirstCall&&u(p,s)},task:function(){var f=Q()(M()().mark(function s(d){var v,y,C,k;return M()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return v=d.draft,y=d.setState,C=d.input,k=d.extraArgs,E.abrupt("return",o({draft:v,setState:y,input:C,options:Object.assign({},k)}));case 2:case"end":return E.stop()}},s)}));function p(s){return f.apply(this,arguments)}return p}(),immediate:i.immediate,desc:i.id,checkDeadCycle:!1}),i.id}},{key:"runComputed",value:function(r,u){var o={desc:r,extraArgs:u};this._stateCtx.runMutateTask(o)}}]),a}(Oe);function Se(e,t){var a=Object.assign({id:mt(),debug:!0,computedThis:function(){return A.Root},computedScope:function(){return A.Current},singleton:!0,reactiveable:!0},t);a.log=function(){a.debug&&Yt.apply(void 0,arguments)};var n=(0,be.Z)(),r={options:a,on:n.on,off:n.off,emit:n.emit,_replacedKeys:{}};return r.computedObjects=new kt(r),r.watchObjects=new Wt(r),r.reactiveable=new xe(e,{onRead:function(o){Vt(o,r)}}),r.stateCtx=(0,h.sharex)(e,{stopArrDep:!1,moduleName:a.id,onRead:function(o){Vt(o,r)}}),r.state=r.stateCtx.reactive,r.emit("created"),r.useState=Kt(r),r.setState=Ce(r),r.enableComputed=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r.stateCtx.setEnableMutate(u)},r.sync=r.stateCtx.sync,r.watch=yt(r),r.useWatch=$t(r),r.watch=yt(r),r}var je=l(39114),Ut=l.n(je);function Ae(e){var t=(0,h.sharex)(e);return Ut()(Ut()({},t),{},{useState:Kt(t)})}},43095:function(xt){function G(l){var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}G.keys=function(){return[]},G.resolve=G,G.id=43095,xt.exports=G}}]);
