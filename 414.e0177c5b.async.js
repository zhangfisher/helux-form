(self.webpackChunkspeedform_docs=self.webpackChunkspeedform_docs||[]).push([[414],{69763:function(gt,F,l){"use strict";l.r(F),l.d(F,{$:function(){return g.$},ComputedObjects:function(){return Dt},ComputedScopeRef:function(){return x},OBJECT_PATH_DELIMITER:function(){return C},SKIP_COMPUTED:function(){return st},WatchObjects:function(){return $t},computed:function(){return Vt},createAsyncComputedMutate:function(){return ft},createAsyncComputedObject:function(){return ut},createComputedMutate:function(){return ct},createObject:function(){return g.share},createStore:function(){return Oe},createUseWatch:function(){return Kt},createWatch:function(){return It},getSnap:function(){return g.getSnap},getVal:function(){return P},getValueByPath:function(){return G},installComputed:function(){return pt},installWatch:function(){return dt},isIncludePath:function(){return Jt},isSkipComputed:function(){return Ct},markRaw:function(){return g.markRaw},reactive:function(){return xe},setAsyncComputedObject:function(){return St},setVal:function(){return L},skipComputed:function(){return et},watch:function(){return he}});var g=l(67687),x=function(e){return e.Root="root",e.Current="current",e.Parent="parent",e.Depends="depends",e.Self="self",e}({});function H(e){return e.map(function(t){return Array.isArray(t)?t.join("."):t}).join("_")}function mt(e,t){var a="";return typeof t=="function"?a=t(e):typeof t=="string"?a=t:a=H(e),a}function Gt(e){return e instanceof Error?e:new Error(e)}var C="/",st=Symbol("SKIP_COMPUTED");function Ct(e){return e[st]===!0}var Nt=l(79664),E=l.n(Nt);function Ot(e,t){if(!Array.isArray(e))throw new Error("path must be an array");return t==="self"?e:t==="root"?[]:t==="parent"?e.slice(0,-2):t==="current"?e.slice(0,-1):typeof t=="string"?t.startsWith("./")?[].concat(E()(e.slice(0,-1)),E()(t.slice(2).split(C))):t.startsWith("../")?Ot(e.slice(0,-1),t.slice(3)):(t.includes(".")&&(console.warn('[@speedform/reactive] The dependency path uses "/" as the separator, and will automatically convert'),t=t.replaceAll(".","/")),[].concat(E()(e.slice(0,-1)),E()(t.split(C)))):Array.isArray(t)?t:e}function bt(e,t){var a=e.get(t);if(a!==void 0)return a;var r=e.get(Number(t)||t);if(r!==void 0)return r}function xt(e){return toString.call(e)==="[object Map]"}function P(e,t){if(t.length===0)return e;var a,r=e;return t.forEach(function(n){a=xt(r)?bt(r,n):r[n],r=a}),a}function Ft(e,t,a){return e.map(function(r){return P(t,Ot(a,r))})}function Bt(e){return(e||[]).map(function(t){return Array.isArray(t)?t:typeof t=="string"?t.startsWith("./")||t.startsWith("../")?t:t.includes(C)?t.split(C):t.split("."):[]})}var Ht=l(26851),zt=l.n(Ht);function Se(e){return _typeof(e)=="object"&&e.hasOwnProperty("__COMPUTED__")&&["async","sync"].includes(e.__COMPUTED__)&&e.hasOwnProperty("fn")&&typeof e.fn=="function"&&e.hasOwnProperty("options")&&_typeof(e.options)=="object"}function Ae(e){return _typeof(e)=="object"&&["result","loading","timeout","retry","run"].every(function(t){return e.hasOwnProperty(t)})}function Jt(e,t){return e.length>t.length?!1:e.every(function(a,r){return a===t[r]})}function Yt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log",a=typeof e=="function"?e():e instanceof Error?e.stack:e;try{var r;(r=console)[t].apply(r,["[@speedform/reactive] "].concat(E()(Array.isArray(a)?a:[a])))}catch(n){}}function L(e,t,a){var r=e,n=t.length-1;t.forEach(function(u,s){var o=xt(r);if(s===n){o?r.set(u,a):r[u]=a;return}var i=o?bt(r,u):r[u];r=i})}function et(e){return e[st]=!0,e}function G(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C,r=[];try{return typeof t=="function"&&(t=t.call(e,e)),r=Array.isArray(t)?t:typeof t=="string"?t.split(a):[],r.length>0?P(e,r):e}catch(n){return e}}function Zt(e,t,a){var r=t==null?a:t;if(typeof r=="function")try{r=r.call(e,e)}catch(n){}return r==null?a==null?x.Root:a:r}function ot(e,t){var a=t.input,r=t.type,n=t.valuePath,u=t.funcOptions,s=t.storeOptions,o=t.computedType,i=e;if(typeof s.onComputedContext=="function"){var f=s.onComputedContext.call(e,e,{computedType:o,contextType:r,valuePath:n});f!==void 0&&(i=f)}var p=n.length>=1?n.slice(0,n.length-1):[],c=Zt(e,r=="context"?u.context:u.scope,r=="context"?s.computedThis&&s.computedThis(o):s.computedScope&&s.computedScope(o));try{if(c===x.Current)return G(e,p);if(c===x.Parent)return G(e,n.slice(0,n.length-2));if(c===x.Root)return i;if(c===x.Depends)return Array.isArray(a)?a.map(function(d){return typeof d=="function"?d():d}):[];if(typeof c=="string")return G(e,[].concat(E()(p),E()(c.split(C))));if(Array.isArray(c))if(c.length>0&&c[0].startsWith("@")){var h=G(e,[].concat(E()(c[0].substring(1).split(C)),E()(c.slice(1))));return G(e,h)}else return G(e,c);else if(typeof c=="number"){var v=c>n.length-2?n.length-c-1:0;return G(e,n.slice(0,v))}else return e}catch(d){return e}}function nt(e,t){var a=this.options,r=t.input,n=t.type,u=t.computedContext,s=t.computedOptions;return ot(e,{input:r,type:n,valuePath:u.fullKeyPath,funcOptions:s,storeOptions:a,computedType:"Computed"})}function ct(e,t,a){var r=e.fullKeyPath,n=e.parent,u=e.value,s=u(),o=s.fn,i=s.options;if(!(n&&!Object.hasOwn(n,r[r.length-1]))){var f=t.options.onCreateComputed;if(typeof f=="function"&&typeof o=="function"){var p=f.call(t,r,o,i);i.scope||(i.scope=x.Current),i.context||(i.context=x.Root),typeof p=="function"&&(o=p)}var c=a!==void 0,h=c?i.id:mt(r,i.id),v=c?h:r.join(C);t.options.log("Create sync computed: ".concat(v));var d=t.stateCtx.mutate({fn:function(O,R){if(!i.enable){t.options.log("Sync computed <".concat(v,"> is disabled"),"warn");return}t.options.log("Run sync computed for : ".concat(v));var T=R.input,y=c?O:nt.call(t,O,{input:T,computedOptions:i,computedContext:e,type:"context"}),I=c?O:nt.call(t,O,{input:T,computedOptions:i,computedContext:e,type:"scope"}),m=i.initial;try{m=o.call(y,I)}catch(V){if(typeof i.onError=="function")try{var S;(S=i.onError)===null||S===void 0||S.call(y,V)}catch(Z){}}c?a.stateCtx.setState(function(V){Object.assign(V,m)}):L(O,r,m)},desc:h,checkDeadCycle:!1});c||e.replaceValue(P(t.stateCtx.state,r));var w={id:v,mutate:d,group:i.group,async:!1,options:i,get enable(){return i.enable},set enable(M){i.enable=M},run:function(O){var R={desc:h,extraArgs:O};return c?a.stateCtx.runMutateTask(R):t.stateCtx.runMutateTask(R)}};return t.computedObjects.set(v,w),w}}var Qt=l(90393),k=l.n(Qt),Xt=l(7392),rt=l.n(Xt),qt=l(70125),at=l.n(qt),_t=l(44340),te=l(10346);function ut(e,t,a){return Object.assign({loading:!1,timeout:0,retry:0,error:null,progress:0,run:(0,g.markRaw)(et(function(r){return e.runMutateTask({desc:t,extraArgs:r})})),cancel:(0,g.markRaw)(et(function(){console.log("cancel")}))},a)}function St(e,t,a,r,n){var u=ut(e,r,n),s=P(t,a);Object.assign(s,u,n)}function ee(e,t,a){var r=Object.assign({},a),n=r.max,u=n===void 0?100:n,s=r.min,o=s===void 0?0:s,i=r.value,f=i===void 0?0:i;return e(function(p){return L(p,[].concat(E()(t),["progress"]),f)}),{value:function(c){c>u&&(c=u),c<o&&(c=o),e(function(h){return L(h,[].concat(E()(t),["progress"]),c)})},end:function(){this.value(u)}}}function Q(e,t,a){e(function(r){Object.entries(a).forEach(function(n){var u=at()(n,2),s=u[0],o=u[1];L(r,[].concat(E()(t),[s]),o)})})}function ne(e,t,a,r){return lt.apply(this,arguments)}function lt(){return lt=rt()(k()().mark(function e(t,a,r,n){var u,s,o,i,f,p,c,h,v,d,w,M,O,R,T,y,I,m,S,V,Z,_,A;return k()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:u=r.input,s=r.computedOptions,o=r.computedContext,i=r.computedResultPath,f=n!==void 0,p=f?n.stateCtx.setState:r.setState,c=f?t:nt.call(this,t,{input:u,computedOptions:s,computedContext:o,type:"context"}),h=f?t:nt.call(this,t,{input:u,computedOptions:s,computedContext:o,type:"scope"}),v=o.fullKeyPath,d=s.timeout,w=d===void 0?0:d,M=s.retry,O=M===void 0?[0,0]:M,R=Array.isArray(O)?O:[Number(O),0],T=at()(R,2),y=T[0],I=T[1],S=new AbortController,V={onTimeout:function(D){return m=D},getProgressbar:function(D){return ee(p,v,D)},getSnap:function(D){return(0,g.getSnap)(D,!1)},abortSignal:S.signal,cancel:S.abort},Z=!1,Q(p,i,{cancel:(0,g.markRaw)(et(function(){return S.abort()}))}),S.signal.addEventListener("abort",function(){Z=!0}),_=k()().mark(function K(){var D,z,N,$,it,B,j,ht,vt,tt,yt,J,Lt;return k()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(N=!1,$=!1,it=A>0,B={},b.prev=2,j=Array.isArray(w)?w:[w,0],ht=at()(j,2),vt=ht[0],tt=vt===void 0?0:vt,yt=ht[1],J=yt===void 0?0:yt,Q(p,i,{loading:!0,error:null,retry:A>0?y-A:0,timeout:J>1?J:tt,progress:0}),!Z){b.next=7;break}throw new Error("Aborted");case 7:return tt>0&&(D=setTimeout(function(){$=!0,typeof m=="function"&&m(),N||(clearInterval(z),Q(p,i,{loading:!1,error:"TIMEOUT",timeout:0}))},tt),J>1&&(z=setInterval(function(){Q(p,i,{timeout:J--}),J===0&&clearInterval(z)},tt/J))),b.next=10,a.call(c,h,V);case 10:Lt=b.sent,$||Object.assign(B,{result:Lt,error:null,timeout:0}),b.next=20;break;case 14:if(b.prev=14,b.t0=b.catch(2),N=!0,typeof s.onError=="function")try{s.onError.call(c,b.t0)}catch(Te){}$||Object.assign(B,{error:Gt(b.t0).message,timeout:0}),y>0&&Object.assign(B,{retry:y-A});case 20:return b.prev=20,clearTimeout(D),clearInterval(z),(!N||A==y)&&Object.assign(B,{loading:!1}),!N&&!$&&Object.assign(B,{error:null}),Q(p,i,B),b.finish(20);case 27:if(!N){b.next=31;break}if(!(y>0&&I>0&&A<y)){b.next=31;break}return b.next=31,(0,te.g)(I);case 31:case"end":return b.stop()}},K,null,[[2,14,20,27]])}),A=0;case 15:if(!(A<y+1)){W.next=20;break}return W.delegateYield(_(),"t0",17);case 17:A++,W.next=15;break;case 20:case"end":return W.stop()}},e,this)})),lt.apply(this,arguments)}function ft(e,t,a){var r=e.fullKeyPath,n=e.parent,u=e.value;if(!(n&&!Object.hasOwn(n,r[r.length-1]))){var s=u(),o=s.getter,i=s.options;i.async=!0;var f=t.options.onCreateComputed;if(typeof f=="function"&&typeof o=="function"){var p=f.call(t,r,o,i);i.scope||(i.scope=x.Current),i.context||(i.context=x.Root),typeof p=="function"&&(o=p)}var c=i.depends,h=c===void 0?[]:c,v=i.initial,d=i.toComputedResult,w=d===void 0?"self":d,M=i.immediate,O=i.noReentry,R=O===void 0?!1:O,T=!1,y=a!==void 0,I=y?[]:(0,_t.d)(w,{self:r,root:[],parent:r.slice(0,r.length-2),current:r.slice(0,r.length-1),Array:w,String:[].concat(E()(r.slice(0,r.length-1)),[String(w).split(C)])},{defaultValue:r}),m=Bt(h);m.length==0&&t.options.log("async computed <".concat(r.join("."),"> should specify depends"),"warn");var S=y?i.id:mt(r,i.id),V=y?S:r.join(C);t.options.log("Create async computed: ".concat(V," (depends=").concat(m.length==0?"None":H(m),")"));var Z=t.stateCtx.mutate({deps:function(U){return Ft(m,U,r)},fn:function(U,W){if(W.isFirstCall)if(y)a.stateCtx.setState(function(D){Object.assign(D,ut(a.stateCtx,S,{result:v}))});else if(w=="self")L(U,r,ut(t.stateCtx,S,{result:v}));else{St(t.stateCtx,U,I,S,{result:v});var K=P(U,r.slice(0,r.length-1));delete K[r[r.length-1]]}},task:function(){var A=rt()(k()().mark(function W(K){var D,z,N,$,it;return k()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(D=K.draft,z=K.setState,N=K.input,$=K.extraArgs,!(!i.enable&&($==null?void 0:$.enable)!==!0)){j.next=4;break}return t.options.log("Async computed <".concat(V,"> is disabled"),"warn"),j.abrupt("return");case 4:if(t.options.log("Run async computed for : ".concat(V)),it=Object.assign({},i,$),!(R&&T&&t.options.debug)){j.next=9;break}return t.options.log("Reentry async computed: ".concat(V),"warn"),j.abrupt("return");case 9:return T=!0,j.prev=10,j.next=13,ne.call(t,D,o,{input:N,computedResultPath:I,computedOptions:it,computedContext:e,setState:z},a);case 13:return j.abrupt("return",j.sent);case 14:return j.prev=14,T=!1,j.finish(14);case 17:case"end":return j.stop()}},W,null,[[10,,14,17]])}));function U(W){return A.apply(this,arguments)}return U}(),immediate:M,desc:S,checkDeadCycle:!1});y||e.replaceValue(P(t.stateCtx.state,r));var _={id:V,mutate:Z,group:i.group,async:!0,options:i,get enable(){return i.enable},set enable(A){i.enable=A},run:function(U){var W={desc:S,extraArgs:U};return y?a.stateCtx.runMutateTask(W):t.stateCtx.runMutateTask(W)}};return t.computedObjects.set(V,_),_}}var At=l(20649);function pt(e,t,a){var r=e.value,n;if(r.__COMPUTED__=="async"?n=ft(e,t,a):r.__COMPUTED__=="sync"?n=ct(e,t,a):(0,At.$)(r)?(e.value=function(){return{fn:r,options:{depends:[],initial:void 0,immediate:!0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},n=ft(e,t,a)):(e.value=function(){return{fn:r,options:{initial:void 0,enable:!0,context:t.options.computedThis&&t.options.computedThis("Computed")}}},n=ct(e,t,a)),n&&typeof t.options.onCreateComputedObject=="function")try{t.options.onCreateComputedObject(e.fullKeyPath,n)}catch(u){t.options.log(u.stack,"error")}}var re=l(71698),X=l.n(re),ae=l(77937),jt=l.n(ae),ue=l(41176),Tt=l.n(ue),ie=l(44114),Y=l.n(ie),se=l(19365),Et=l.n(se),oe=l(72904),wt=l.n(oe),ce=l(65523),Mt=l.n(ce),le=l(7122),Rt=l.n(le),fe=l(19108),Wt=l.n(fe),pe=l(79862),q=l.n(pe);function Vt(e,t,a){if(typeof e!="function")throw new Error("computed getter must be a function");var r=[],n={async:!1,enable:!0,timeout:0,depends:[],toComputedResult:x.Self,immediate:!0};if(arguments.length==1)r=[];else if(arguments.length==2)if(Array.isArray(arguments[1]))r=arguments[1];else if(zt()(arguments[1])=="object")Object.assign(n,arguments[1]);else throw new Error("invalid arguments");else arguments.length>=3&&(r=arguments[1],Object.assign(n,arguments[2]));var u=n.async===!0||(0,At.$)(e)||arguments.length>=2&&Array.isArray(t);n.async=u,n.depends=r;var s=function(){return{getter:e,options:n}};return s.__COMPUTED__=u?"async":"sync",s}function de(e){return function(t,a){var r=Object.assign({id:"s"+Math.random().toString(16).substring(2),scope:e.stateCtx.state,context:e.stateCtx.state},a);if(!Array.isArray(r.depends)||r.depends.length==0)throw new Error("options.depends must be an array and not empty");var n=(0,g.sharex)({}),u={fullKeyPath:[],parent:null,value:Vt(t,r.depends,a)};return pt(u,e),n}}var Dt=function(e){Mt()(a,e);var t=Rt()(a);function a(r){var n;return jt()(this,a),n=t.call(this),q()(Y()(n),"_createComputed",void 0),n.store=r,n}return Tt()(a,[{key:"runGroup",value:function(){var r=rt()(k()().mark(function u(s){return k()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(E()(this.values()).filter(function(f){return f.group==s}).map(function(f){return f.async?f.mutate.runTask():f.mutate.run()})));case 1:case"end":return i.stop()}},u,this)}));function n(u){return r.apply(this,arguments)}return n}()},{key:"enableGroup",value:function(){var r=rt()(k()().mark(function u(s){var o,i,f;return k()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:o=X()(this.values());try{for(o.s();!(i=o.n()).done;)f=i.value,f.options.enable=s}catch(h){o.e(h)}finally{o.f()}case 2:case"end":return c.stop()}},u,this)}));function n(u){return r.apply(this,arguments)}return n}()},{key:"delete",value:function(n){var u;return(u=this.get(n))===null||u===void 0||u.mutate.cancel(),Et()(wt()(a.prototype),"delete",this).call(this,n)}},{key:"new",get:function(){return this._createComputed||(this._createComputed=de(this.store)),this._createComputed}}]),a}(Wt()(Map));function Pt(e){return typeof e=="function"?e:typeof e=="string"?function(t){return H(t)==H(e.split(C))}:Array.isArray(e)?function(t){return e.map(function(a){return typeof a=="string"?a.split(C):Array.isArray(a)?a:[String(a)]}).some(function(a){return H(t)==H(a)})}:function(){return!1}}function he(e,t,a){var r=Object.assign({depends:t,enable:!0,scope:x.Depends},a);r.depends=Pt(r.depends);var n=function(){return{listener:e,options:r}};return n.__COMPUTED__="watch",n}function It(e){return function(t,a){var r=(0,g.watch)(function(u){var s=u.triggerReasons,o=s.map(function(i){return i.keyPath});t(o)},function(){return a==null?void 0:a.map(function(u){return G(e.stateCtx.state,u)})}),n=r.unwatch;return n}}var ve=l(70079);function dt(e,t,a){t.options.log("install watch for <".concat(e.fullKeyPath.length==0?"Dynamic":e.fullKeyPath.join(C),">"));var r=e.value(),n=t.watchObjects.add(e.fullKeyPath,r,a);return a?a.stateCtx.setState(function(u){u.value=r.options.initial}):(e.replaceValue(r.options.initial),t.stateCtx.setState(function(u){L(u,e.fullKeyPath,r.options.initial)}),(0,g.flush)(t.stateCtx.state)),n}function Kt(e){return function(t,a,r){(0,ve.useEffect)(function(){var n={stateCtx:(0,g.sharex)({value:0})},u={fullKeyPath:["value"],keyPath:[],parent:void 0,value:function(){var i={listener:t,options:Object.assign({depends:a,initial:0,enable:!0,scope:x.Depends},r)};return i.options.depends=Pt(i.options.depends),i}},s=dt(u,e,n);return function(){e.watchObjects.delete(s.id)}},[a])}}function ye(){return Math.random().toString(36).slice(2)}var $t=function(e){Mt()(a,e);var t=Rt()(a);function a(r){var n;return jt()(this,a),n=t.call(this),q()(Y()(n),"_off",void 0),q()(Y()(n),"_enable",!0),q()(Y()(n),"cache",new Map),q()(Y()(n),"watcherCache",void 0),n.store=r,r.on("created",n.onStateCreated.bind(Y()(n))),n}return Tt()(a,[{key:"onStateCreated",value:function(){this.createWacher()}},{key:"enable",get:function(){return this._enable},set:function(n){this._enable=n}},{key:"delete",value:function(n){var u=this.get(n);if(u){var s=this.getValueKey(u.selfPath);this.cache.has(s)&&this.cache.delete(s)}return Et()(wt()(a.prototype),"delete",this).call(this,n)}},{key:"getValueKey",value:function(n){return H([n])}},{key:"createWacher",value:function(){var n=this,u=(0,g.watch)(function(o){var i=o.triggerReasons;if(n._enable){var f=i.map(function(p){return p.keyPath});f.forEach(function(p){var c=X()(n.values()),h;try{for(c.s();!(h=c.n()).done;){var v=h.value;n.executeListener(p,v)}}catch(m){c.e(m)}finally{c.f()}var d=n.getCachedWatchers(p),w=P(n.store.state,p);if(d.length===0){var M=X()(n.values()),O;try{for(M.s();!(O=M.n()).done;){var R=O.value;n.isMatchWatcher(p,w,R)&&(n.addWatcherToCache(p,R.selfPath,R),d.push(R))}}catch(m){M.e(m)}finally{M.f()}}var T=X()(d),y;try{for(T.s();!(y=T.n()).done;){var I=y.value;try{I.run.call(I,p)}catch(m){console.warn("Error while run watchLisenter("+p.join(C)+"->"+I.selfPath.join(C)+")",m.stack)}}}catch(m){T.e(m)}finally{T.f()}})}},function(){return[n.store.state]}),s=u.unwatch;this._off=s}},{key:"reset",value:function(){var n;this.cache.clear(),this._off&&this._off(),(n=this.watcherCache)===null||n===void 0||n.clear(),this.createWacher()}},{key:"getCachedWatchers",value:function(n){var u=this.getValueKey(n);return this.cache.has(u)?this.cache.get(u):[]}},{key:"addWatcherToCache",value:function(n,u,s){var o=this.getValueKey(n);this.cache.has(o)||this.cache.set(o,[]);var i=this.cache.get(o);i.push(s)}},{key:"getWatcherCache",value:function(n){this.watcherCache||(this.watcherCache=new Map);var u=n.join(".");return this.watcherCache.has(u)||this.watcherCache.set(u,{}),this.watcherCache.get(u)}},{key:"isMatchWatcher",value:function(n,u,s){if(!(this._enable===!1||s.options.enable===!1)&&typeof s.options.on=="function")return s.options.on(n,u)}},{key:"executeListener",value:function(n,u){var s=this;if(!u.options.enable){this.store.options.log("watcher <".concat(u.selfPath.join(C),"> is disabled"));return}var o=u.selfPath,i=u.watchTo,f=u.listener,p={getSelfValue:function(){return P((0,g.getSnap)(s.store.state),o)},getCache:function(){return s.getWatcherCache(o)},fromPath:n,selfPath:o,state:this.store.state},c=ot(this.store.state,{computedType:"Watch",input:[function(){return P(s.store.state,n)}],type:"scope",valuePath:o,funcOptions:{scope:u.options.scope},storeOptions:this.store.options}),h=u.options.scope==x.Depends&&Array.isArray(c)?c[0]:c,v=f.call(this.store.state,h,p);v!==void 0&&(i?i.stateCtx.setState(function(d){d.value=v}):this.store.setState(function(d){L(d,o,v)}))}},{key:"executeListener2",value:function(n,u,s){var o=this;if(!s.options.enable){this.store.options.log("watcher <".concat(u.join(C),"> is disabled"));return}var i=s.watchTo,f=s.listener,p={getSelfValue:function(){return P((0,g.getSnap)(o.store.state),u)},getCache:function(){return o.getWatcherCache(u)},fromPath:n,selfPath:u,state:this.store.state},c=ot(this.store.state,{computedType:"Watch",input:[function(){return P(o.store.state,n)}],type:"scope",valuePath:u,funcOptions:{scope:s.options.scope},storeOptions:this.store.options}),h=s.options.scope==x.Depends&&Array.isArray(c)?c[0]:c,v=f.call(this.store.state,h,p);v!==void 0&&(i?i.stateCtx.setState(function(d){d.value=v}):this.store.setState(function(d){L(d,u,v)}))}},{key:"add",value:function(n,u,s){var o=this,i={selfPath:n,listener:u.listener,options:u.options,watchTo:s};if(typeof i.options.on!="function")throw new Error("watch options.on must be a function");return i.id||(i.id=Array.isArray(n)&&n.length>0?this.getValueKey(n):ye()),i.run=function(f){return o.executeListener(f,n,i)},this.set(i.id,i),i}},{key:"enableGroup",value:function(n){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=X()(this.values()),o;try{for(s.s();!(o=s.n()).done;){var i=o.value;i.options.group==n&&(i.options.enable=u)}}catch(f){s.e(f)}finally{s.f()}}}]),a}(Wt()(Map));function ge(e,t){var a=e.fullKeyPath,r=e.value,n=a.join(".");typeof r=="function"&&!t._replacedKeys[n]&&!Ct(r)&&(t._replacedKeys[n]=!0,r.__COMPUTED__=="watch"?dt(e,t):pt(e,t))}function kt(e){return function(t,a){var r=e.stateCtx.useState;if(t==null)return r();var n=r(),u=at()(n,2),s=u[0],o=u[1],i=t(s),f=o;return typeof a=="function"&&(f=function(c){o(function(h){a.call(h,h,c)})}),[i,f]}}function me(e){return function(t){e.stateCtx.setState(function(a){t(a)})}}var Ce=l(24222);function Oe(e,t){var a=Object.assign({id:Math.random().toString(16).substring(2),debug:!0,computedThis:function(){return x.Root},computedScope:function(){return x.Current},singleton:!0},t);a.log=function(){a.debug&&Yt.apply(void 0,arguments)};var r=(0,Ce.Z)(),n={options:a,on:r.on,off:r.off,emit:r.emit,_replacedKeys:{}};return n.computedObjects=new Dt(n),n.watchObjects=new $t(n),n.stateCtx=(0,g.sharex)(e.state,{stopArrDep:!1,moduleName:a.id,onRead:function(s){ge(s,n)}}),n.state=n.stateCtx.reactive,n.emit("created"),n.useState=kt(n),n.setState=me(n),n.enableComputed=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n.stateCtx.setEnableMutate(u)},n.sync=n.stateCtx.sync,n.watch=It(n),n.useWatch=Kt(n),n}var be=l(39114),Ut=l.n(be);function xe(e){var t=(0,g.sharex)(e);return Ut()(Ut()({},t),{},{useState:kt(t)})}},43095:function(gt){function F(l){var g=new Error("Cannot find module '"+l+"'");throw g.code="MODULE_NOT_FOUND",g}F.keys=function(){return[]},F.resolve=F,F.id=43095,gt.exports=F}}]);
